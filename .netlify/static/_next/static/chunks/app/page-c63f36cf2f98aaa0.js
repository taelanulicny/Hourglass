(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{6590:function(e,t,a){Promise.resolve().then(a.bind(a,5221))},5221:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return E}});var l=a(7437);a(2778);var s=a(2265),r=a(9376),n=a(8090),o=a(3260),i=a(7777),c=a(7934),d=function(e){var t,a;let{focusAreaId:r,focusContext:d}=e,u="aiHistory:".concat(r),m=(0,s.useRef)(null),[x,h]=(0,s.useState)([]),[g,b]=(0,s.useState)(""),[f,v]=(0,s.useState)(!1),[p,y]=(0,s.useState)(!0),[w,N]=(0,s.useState)(!1),[j,S]=(0,s.useState)(!0),k='How can I help you in "'.concat(null!==(t=null==d?void 0:d.name)&&void 0!==t?t:"this focus area",'" right now?');function D(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=m.current;t&&(e?t.scrollTo({top:t.scrollHeight,behavior:"smooth"}):t.scrollTop=t.scrollHeight)}async function C(){if(!g.trim()||f)return;let e=g.trim();if(e.length>500){h(e=>[...e,{role:"assistant",content:"Your message is too long. Please keep it under 500 characters for better responses."}]);return}let t=[...x,{role:"user",content:e}];h(t),b(""),v(!0),y(!1),N(!0);try{let e=await fetch("/api/ai/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({messages:t,focusContext:d})});if(!e.ok)throw Error("HTTP error! status: ".concat(e.status));let a=await e.json();if(a.error)throw Error(a.error);h(e=>[...e,{role:"assistant",content:a.message}])}catch(l){console.error("AI request failed:",l);let e="I'm having trouble connecting right now. ";l.message.includes("quota")||l.message.includes("429")?e+="It looks like I've reached my usage limit for today. I can still help you with some general advice though! ":l.message.includes("network")||l.message.includes("fetch")?e+="There seems to be a network issue. Please check your connection and try again. ":e+="Please try again in a moment. ";let t=(null==d?void 0:d.name)||"your focus area",a=(null==d?void 0:d.goal)||"your daily goal";e+="\n\nHere's some quick advice for \"".concat(t,'":\n\n')+"• Focus on progress over perfection\n"+"• Break your ".concat(a,"-hour goal into smaller chunks\n")+"• Take breaks to maintain energy\n• Track what works and what doesn't\n\nTry asking me again in a few minutes, or let me know what specific help you need!",h(t=>[...t,{role:"assistant",content:e}])}finally{v(!1)}}return(0,s.useEffect)(()=>{y(!0),N(!1);let e=setTimeout(()=>D(!0),100);return()=>clearTimeout(e)},[r]),(0,s.useEffect)(()=>{(x.length>0||f)&&D(!0)},[x,f,p]),(0,s.useEffect)(()=>{try{let e=localStorage.getItem(u);if(e){let t=JSON.parse(e);if(Array.isArray(t)&&t.length>0){let e=t.filter(e=>!("assistant"===e.role&&(e.content.includes("today")||e.content.includes("Hi! I'm your AI assistant"))));h(e);return}}}catch(e){}h([])},[r]),(0,s.useEffect)(()=>{if(x.length>0)try{console.log("Saving ".concat(x.length," messages for ").concat(r,":"),x),localStorage.setItem(u,JSON.stringify(x))}catch(e){console.warn("Error saving chat history:",e)}else console.log("Not saving - no conversation content for ".concat(r))},[u,x,r]),(0,l.jsxs)("div",{className:"ai-helper",children:[(0,l.jsx)("div",{className:"ai-header",children:(0,l.jsx)("div",{className:"ai-title",children:(0,l.jsx)("span",{className:"ai-text",children:"Focus Area Specific AI Assistant"})})}),(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsxs)("div",{ref:m,className:"ai-messages scrollbar-hide",style:{maxHeight:320,overflowY:"auto",display:"flex",flexDirection:"column",gap:6},onScroll:()=>{let e=m.current;e&&(S(e.scrollTop+e.clientHeight>=e.scrollHeight-10),w&&e.scrollTop>e.scrollHeight-e.clientHeight+20&&(N(!1),y(!0),setTimeout(()=>D(!0),100)))},children:[w&&x.map((e,t)=>(0,l.jsx)("div",{className:"assistant"===e.role?"msg assistant":"msg user",children:"assistant"===e.role?(0,l.jsx)(n.UG,{remarkPlugins:[o.Z],rehypePlugins:[i.Z,c.Z],components:{h1:e=>{let{node:t,...a}=e;return(0,l.jsx)("h3",{...a})},h2:e=>{let{node:t,...a}=e;return(0,l.jsx)("h4",{...a})},h3:e=>{let{node:t,...a}=e;return(0,l.jsx)("h5",{...a})},ul:e=>{let{node:t,...a}=e;return(0,l.jsx)("ul",{className:"list-disc pl-5 my-1",...a})},ol:e=>{let{node:t,...a}=e;return(0,l.jsx)("ol",{className:"list-decimal pl-5 my-1",...a})},li:e=>{let{node:t,...a}=e;return(0,l.jsx)("li",{className:"my-0.5",...a})},strong:e=>{let{node:t,...a}=e;return(0,l.jsx)("strong",{className:"font-semibold",...a})}},children:e.content}):e.content},t)),p&&(0,l.jsx)("div",{className:"msg assistant greeting",children:k}),f&&(0,l.jsxs)("div",{className:"msg assistant typing-indicator flex items-center gap-2",children:[(0,l.jsx)("div",{className:"ai-loading"}),(0,l.jsx)("span",{children:"Thinking…"})]}),w&&(0,l.jsx)("div",{className:"h-32"})]}),(w&&x.length>0||p)&&(0,l.jsxs)("div",{className:"absolute bottom-2 right-2 flex gap-2 z-10",children:[x.length>0&&!w&&(0,l.jsx)("button",{onClick:()=>N(!0),className:"bg-gray-400 text-white rounded-full w-8 h-8 flex items-center justify-center shadow-lg hover:bg-gray-500 transition-colors","aria-label":"View previous conversation",title:"View previous conversation (".concat(x.length," messages)"),children:(0,l.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 15l7-7 7 7"})})}),!j&&(0,l.jsx)("button",{onClick:()=>D(!0),className:"bg-[#8CA4AF] text-white rounded-full w-8 h-8 flex items-center justify-center shadow-lg hover:bg-[#7A939F] transition-colors","aria-label":"Scroll to bottom",title:"Scroll to bottom",children:(0,l.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 14l-7 7m0 0l-7-7m7 7V3"})})})]})]}),(0,l.jsxs)("div",{className:"ai-input",children:[(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsx)("input",{value:g,onChange:e=>b(e.target.value),placeholder:"Ask for advice about ".concat(null!==(a=null==d?void 0:d.name)&&void 0!==a?a:"this area","…"),onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),C())},maxLength:500}),g.length>400&&(0,l.jsxs)("div",{className:"absolute -top-6 right-0 text-xs text-gray-500",children:[g.length,"/500"]})]}),(0,l.jsx)("button",{onClick:C,disabled:f||!g.trim(),className:"flex items-center gap-1",children:f?(0,l.jsx)("div",{className:"ai-loading w-3 h-3"}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("span",{children:"Send"}),(0,l.jsx)("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})})]})})]})]})};function u(e){return(Math.round(10*(Number(e)||0))/10).toFixed(1).replace(/\.0$/,"")}function m(e){return 1===Number(e)?"hr":"hrs"}function x(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];try{if(!e)return t;return JSON.parse(e)||t}catch(a){return console.warn("Failed to parse JSON:",e,a),t}}function h(e){let t=Math.max(0,Number(e)||0);if(t<1){let e=Math.round(60*t);return"".concat(e," ").concat(1===e?"min":"mins")}return"".concat(u(t)).concat(m(t))}function g(e){let t=Math.max(0,Number(e)||0),a=Math.floor(t),l=Math.round((t-a)*60);return a>0&&l>0?"".concat(a,"hrs ").concat(l,"mins"):a>0?"".concat(a,"hrs"):"".concat(l,"mins")}function b(e){return(e||"").toString().trim().toLowerCase().replace(/[-_]+/g," ")}function f(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.55;if(!e)return"rgba(140, 164, 175, ".concat(t,")");let a=e.trim();"#"===a[0]&&(a=a.slice(1)),3===a.length&&(a=a.split("").map(e=>e+e).join(""));let l=parseInt(a,16);return"rgba(".concat(l>>16&255,", ").concat(l>>8&255,", ").concat(255&l,", ").concat(t,")")}function v(e){let t=Math.max(0,Math.floor(e)),a=e=>String(e).padStart(2,"0");return"".concat(a(Math.floor(t/3600)),":").concat(a(Math.floor(t%3600/60)),":").concat(a(t%60))}function p(e){let{y:t,m:a,d:l,hh:s=0,mm:r=0}=e;return new Date(Number(t),Number(a)-1,Number(l),Number(s),Number(r),0,0)}function y(e,t,a){if(e){let[a,l,s]=e.split("-");if(t){let[e,r]=t.split(":");return p({y:a,m:l,d:s,hh:e,mm:r})}return p({y:a,m:l,d:s})}if(a){if(/[zZ]|[+\-]\d{2}:\d{2}$/.test(a)){let e=new Date(a);return isNaN(e)?null:e}if(/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}$/.test(a)){let[e,t]=a.split("T"),[l,s,r]=e.split("-"),[n,o]=t.split(":");return p({y:l,m:s,d:r,hh:n,mm:o})}if(/^\d{4}-\d{2}-\d{2}$/.test(a)){let[e,t,l]=a.split("-");return p({y:e,m:t,d:l})}let e=new Date(a);return isNaN(e)?null:e}return null}function w(e){return y(e.startYMD,e.startHM,e.start)||y(e.dateYMD,e.timeHM,e.startAt)}function N(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,t=e.getFullYear(),a=String(e.getMonth()+1).padStart(2,"0"),l=String(e.getDate()).padStart(2,"0");return"".concat(t,"-").concat(a,"-").concat(l)}function j(e){let[t,a,l]=e.split("-").map(Number);return new Date(t,a-1,l)}function S(e,t){let a=new Date(e);return a.setDate(a.getDate()+t),a}function k(e,t){return e===t?0:e<t?-1:1}function D(e){let t=new Date(e),a=t.getFullYear(),l=String(t.getMonth()+1).padStart(2,"0"),s=String(t.getDate()).padStart(2,"0");return"".concat(a,"-").concat(l,"-").concat(s)}function C(){let e=(0,r.useRouter)(),[t,a]=(0,s.useState)(0),[n,o]=(0,s.useState)(!1),[i,c]=(0,s.useState)(null),[p,C]=(0,s.useState)(!1),E=(0,s.useMemo)(()=>{let e=new Date;return e.setDate(e.getDate()+t),e},[t]),M=(0,s.useMemo)(()=>{let e=new Date(E);return e.setDate(E.getDate()-(E.getDay()+6)%7),e.setHours(0,0,0,0),e},[E]),F=(0,s.useMemo)(()=>{let e=new Date(M);return e.setDate(M.getDate()+6),e.setHours(23,59,59,999),e},[M]),I=e=>e.toLocaleDateString("en-US",{month:"long",day:"numeric"}),A="".concat(I(M)," – ").concat(I(F)),T=e=>{let t=new Date(e);return t.setDate(e.getDate()-(e.getDay()+6)%7),t.setHours(0,0,0,0),"".concat(t.getFullYear(),"-").concat(String(t.getMonth()+1).padStart(2,"0"),"-").concat(String(t.getDate()).padStart(2,"0"))},L="focusCategories:week:",[O]=(0,s.useState)(()=>T(new Date)),[W,B]=(0,s.useState)(()=>T(E));(0,s.useEffect)(()=>{let e=localStorage.getItem("lastProcessedWeekKey");if(e&&e!==O){console.log("New week detected on app start, clearing old focus categories data"),localStorage.removeItem("focusCategories");let t=localStorage.getItem(L+e),a=[];if(t)try{a=JSON.parse(t).map(e=>({...e,days:{},timeSpent:0}))}catch(e){console.warn("Failed to parse previous week data:",e)}a.length>0&&(localStorage.setItem("focusCategories",JSON.stringify(a)),localStorage.setItem(L+O,JSON.stringify(a))),localStorage.setItem("lastProcessedWeekKey",O)}else e||localStorage.setItem("lastProcessedWeekKey",O)},[O]);let H=T(new Date(Date.now()+6048e5)),J=W===O;(0,s.useEffect)(()=>{o(W===H)},[W,H]);let P=J||n;(0,s.useEffect)(()=>{console.log("DEBUG: offset useEffect triggered - offset:",t,"rawDate:",E,"weekKey(rawDate):",T(E)),B(T(E))},[t]);let[Y,z]=(0,s.useState)([]),U=(0,r.useSearchParams)(),[G,R]=(0,s.useState)(8),[V,K]=(0,s.useState)(0),_=24-G-V;function Z(e){try{if(localStorage.setItem(L+W,JSON.stringify(e)),W===O){localStorage.setItem("focusCategories",JSON.stringify(e));try{window.dispatchEvent(new Event("focusCategoriesUpdated"))}catch(e){}}}catch(e){}}(0,s.useEffect)(()=>{let e=localStorage.getItem("sleepHours"),t=localStorage.getItem("miscHours");e&&R(Number(e)),t&&K(Number(t))},[]),(0,s.useEffect)(()=>{let e=e=>{"sleepHours"===e.key&&R(Number(e.newValue||8)),"miscHours"===e.key&&K(Number(e.newValue||0))},t=e=>{R(Number(e.detail||8))},a=e=>{K(Number(e.detail||0))};return window.addEventListener("storage",e),window.addEventListener("sleepHoursChanged",t),window.addEventListener("miscHoursChanged",a),()=>{window.removeEventListener("storage",e),window.removeEventListener("sleepHoursChanged",t),window.removeEventListener("miscHoursChanged",a)}},[]),(0,s.useEffect)(()=>{let e=!1,t=L+W,a=[];try{if(W===O){let e=localStorage.getItem("lastProcessedWeekKey");if(e&&e!==O){console.log("New week detected, clearing old focus categories data"),localStorage.removeItem("focusCategories");let t=localStorage.getItem(L+e),a=[];if(t)try{a=JSON.parse(t).map(e=>({...e,days:{},timeSpent:0}))}catch(e){console.warn("Failed to parse previous week data:",e)}a.length>0&&(localStorage.setItem("focusCategories",JSON.stringify(a)),localStorage.setItem(L+O,JSON.stringify(a))),localStorage.setItem("lastProcessedWeekKey",O)}else e||localStorage.setItem("lastProcessedWeekKey",O);let l=localStorage.getItem("focusCategories");if(l)a=x(l,[]),localStorage.setItem(t,JSON.stringify(a));else{let e=localStorage.getItem(t);a=e?x(e,[]):[]}}else{let e=localStorage.getItem(t);a=e?x(e,[]):[]}}catch(e){a=[]}return e||z(a),()=>{e=!0}},[W,O]),(0,s.useEffect)(()=>{let e=!1,l=U.get("focus"),s=U.get("scroll");if(l&&Y.length>0){let r=Y.find(e=>b(e.label)===b(l));if(r&&!e){c({...r,_manuallySet:!0}),console.log("DEBUG: Before reset - offset:",t,"viewWeekKey:",W,"currentWeekKey:",O),a(0),B(O);let e=new Date;eS(D(e)),console.log("DEBUG: After reset - set offset to 0, set viewWeekKey to:",O,"set selectedDateFA to today:",D(e)),"top"===s&&window.scrollTo({top:0,behavior:"auto"})}}return()=>{e=!0}},[U,Y,O]),(0,s.useEffect)(()=>{if(i){window.scrollTo({top:0,behavior:"auto"});let e=new Date;eS(D(e)),console.log("DEBUG: Focus area selected from dashboard - reset selectedDateFA to today:",D(e)),i._manuallySet||c({...i,_manuallySet:!0})}},[i]),(0,s.useEffect)(()=>{let e=()=>{try{let e=localStorage.getItem("focusCategories");if(!e)return;let t=x(e,[]);try{localStorage.setItem(L+O,JSON.stringify(t))}catch(e){}W!==O&&B(O),z(t)}catch(e){}},t=t=>{let a=null==t?void 0:t.key;a&&"focusCategories"!==a&&"focusCategories:lastUpdate"!==a||e()},a=()=>{"visible"===document.visibilityState&&e()};return window.addEventListener("focusCategoriesUpdated",e),window.addEventListener("storage",t),document.addEventListener("visibilitychange",a),()=>{window.removeEventListener("focusCategoriesUpdated",e),window.removeEventListener("storage",t),document.removeEventListener("visibilitychange",a)}},[W,O]);let[$,q]=(0,s.useState)(!1),[Q,X]=(0,s.useState)(""),[ee,et]=(0,s.useState)(""),[ea,el]=(0,s.useState)(""),[es,er]=(0,s.useState)(null),[en,eo]=(0,s.useState)(null),[ei,ec]=(0,s.useState)(""),[ed,eu]=(0,s.useState)(""),[em,ex]=(0,s.useState)("#6B7280"),eh=["M","Tu","W","Th","F","Sa","Su"],eg=["Su","M","Tu","W","Th","F","Sa"][new Date().getDay()],eb=(Y||[]).reduce((e,t)=>e+(Number(null==t?void 0:t.goal)||0),0),ef=Math.max(0,_-eb),ev=Math.max(0,eb-_),[ep,ey]=(0,s.useState)("#6B7280");(0,s.useEffect)(()=>{$&&ey("#6B7280")},[$]);let ew=(Y||[]).filter(e=>{let t=Number((null==e?void 0:e.goal)||0),a=Number((null==e?void 0:e.timeSpent)||0),l=Object.values((null==e?void 0:e.days)||{}).reduce((e,t)=>e+(Number(t)||0),0);return t>0||a>0||l>0}),eN=N(new Date),[ej,eS]=(0,s.useState)(()=>{let e=new Date;return D(e>=M&&e<=F?e:M)});(0,s.useEffect)(()=>{if(i&&i._manuallySet)return;let e=new Date;eS(D(e>=M&&e<=F?e:M))},[W,i,M,F]);let ek=(()=>{let e=new Date(E);return e.setHours(0,0,0,0),"".concat(e.getFullYear(),"-").concat(String(e.getMonth()+1).padStart(2,"0"),"-").concat(String(e.getDate()).padStart(2,"0"))})();function eD(e){let[t,a,l]=(e||"").split("-").map(Number);return new Date(t,(a||1)-1,l||1)}function eC(e){let t=new Date(e),a=String(t.getHours()).padStart(2,"0"),l=String(t.getMinutes()).padStart(2,"0");return"".concat(a,":").concat(l)}function eE(e,t){if(!e||!t)return new Date().toISOString();let[a,l,s]=e.split("-").map(Number),[r,n]=t.split(":").map(Number);return new Date(a,(l||1)-1,s||1,r||0,n||0,0,0).toISOString()}eD(ek).getDay();let eM="+ Add another Focus Area",[eF,eI]=(0,s.useState)(""),[eA,eT]=(0,s.useState)(""),[eL,eO]=(0,s.useState)(!1),[eW,eB]=(0,s.useState)(0),[eH,eJ]=(0,s.useState)(0),eP=(0,s.useMemo)(()=>({current:null}),[]);function eY(e){if(function(e){if(!e)return!1;let t=eD(e),a=new Date;return new Date(t.getFullYear(),t.getMonth(),t.getDate())>new Date(a.getFullYear(),a.getMonth(),a.getDate())}(ej)){window.alert("This is a future date. You can&apos;t log time yet — plan a session in the Timeline below instead.");return}if(!i||!e)return;let t=["Su","M","Tu","W","Th","F","Sa"][eD(ej).getDay()],a=(Y||[]).map(a=>{if(b(a.label)!==b(i.label))return a;let l=Array.isArray(a.days)?{...a.days}:{...a.days||{}},s=Number(l[t]||0);l[t]=Math.max(0,s+e);let r=Object.values(l).reduce((e,t)=>e+(Number(t)||0),0);return{...a,days:l,timeSpent:r}});z(a),Z(a)}(0,s.useEffect)(()=>{if(!i)return;let e=(Y||[]).find(e=>b(e.label)===b(i.label))||i,t=Number((null==e?void 0:e.goal)||0),a=["Su","M","Tu","W","Th","F","Sa"][eD(ej).getDay()],l=Math.max(0,Math.round(3600*Number(Math.max(0,t-Number((null==e?void 0:e.days)&&e.days[a]||0))||0)));if(eB(l),eJ(l),eO(!1),eP.current)try{clearInterval(eP.current)}catch(e){}},[i,ej,Y,eP]),(0,s.useEffect)(()=>{if(eL)return eP.current=setInterval(()=>{eJ(e=>{let t=Math.max(0,e-1);if(0===t){eO(!1);try{clearInterval(eP.current)}catch(e){}}return t})},1e3),()=>{try{clearInterval(eP.current)}catch(e){}}},[eL,eP]);let[ez,eU]=(0,s.useState)(""),[eG,eR]=(0,s.useState)(!1),[eV,eK]=(0,s.useState)({date:"",start:"",end:""}),e_=(0,s.useRef)(null),eZ=(0,s.useRef)(null),[e$,eq]=(0,s.useState)(!1),[eQ,eX]=(0,s.useState)(null),[e0,e1]=(0,s.useState)({title:"",area:"",dateYMD:"",start:"",end:"",notes:""});if((0,s.useEffect)(()=>{if(!i)return;let e="focusNotes:".concat(W,":").concat(i.label);try{let t=localStorage.getItem(e);eU(t||"")}catch(e){eU("")}},[W,i]),i){var e2;let a=(Y||[]).find(e=>b(e.label)===b(i.label))||i,s=(null==a?void 0:a.color)||"#6B7280",r=Number(null==a?void 0:a.goal)||0,n=["Su","M","Tu","W","Th","F","Sa"][eD(ej).getDay()],o=Number((null==a?void 0:null===(e2=a.days)||void 0===e2?void 0:e2[n])||0),F=Math.min(r>0?o/r*100:0,100).toFixed(0),I=r>0?(o-r)/r*100:0,A=o>r?Math.min(I,100).toFixed(0):0,T=14/21,L=Math.abs(r-o);"focusNotes:".concat(W,":").concat(a.label),new Date().getDay(),eD(ek).getDay();let O=["Su","M","Tu","W","Th","F","Sa"][eD(ej).getDay()],B=(()=>{try{let e=localStorage.getItem("hourglassEvents:v1")||localStorage.getItem("calendarEvents");return e?x(e,[]):[]}catch(e){return[]}})();B.filter(e=>{let l=new Date(e.start),s=b(e.area)===b(a.label),r=new Date(E.getFullYear(),E.getMonth(),1),n=new Date(E.getFullYear(),E.getMonth()+1,0,23,59,59,999),o=l>=r&&l<=n;return e.area===a.label&&console.log("Event filtering debug:",{event:e.title,area:e.area,focusArea:a.label,evStart:l.toISOString(),evStartLocal:l.toLocaleString(),viewedMonthStart:r.toISOString(),viewedMonthEnd:n.toISOString(),rawDate:E.toISOString(),offset:t,matchesArea:s,matchesMonth:o,included:s&&o}),s&&o});let H=(()=>{let e=new Date(E);return e.setDate(E.getDate()-(E.getDay()+6)%7),e.setHours(0,0,0,0),e})(),z=(()=>{let e=new Date(H);return e.setDate(H.getDate()+6),e.setHours(23,59,59,999),e})(),U=B.filter(e=>{if(b(e.area)!==b(a.label))return!1;let t=w(e),l=y(e.endYMD,e.endHM,e.end)||y(null,null,e.endAt);return t&&t>=H&&t<=z||!t&&l&&l>=H&&l<=z}).sort((e,t)=>{var a,l,s,r;return(null!==(s=null===(a=w(e))||void 0===a?void 0:a.getTime())&&void 0!==s?s:1/0)-(null!==(r=null===(l=w(t))||void 0===l?void 0:l.getTime())&&void 0!==r?r:1/0)});return(0,l.jsxs)("div",{className:"min-h-screen bg-white text-black px-4 pb-32 font-sans flex flex-col",children:[(0,l.jsxs)("div",{className:"flex flex-col gap-6 w-full max-w-md mx-auto pt-16",children:[(0,l.jsx)("div",{className:"w-full flex flex-col gap-4",children:(0,l.jsxs)("div",{className:"bg-white rounded-xl shadow-md p-6",children:[(0,l.jsxs)("div",{className:"flex items-center gap-6 w-full",children:[(0,l.jsxs)("div",{className:"flex flex-col items-center w-28",children:[(0,l.jsx)("div",{className:"text-sm font-semibold text-[#374151] text-center mb-1",children:a.label}),(0,l.jsxs)("div",{className:"relative w-20 h-20",children:[(0,l.jsxs)("svg",{className:"w-full h-full",viewBox:"0 0 36 36",children:[(0,l.jsx)("path",{className:"text-gray-300",stroke:"currentColor",strokeWidth:"3",fill:"none",d:"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831"}),(0,l.jsx)("path",{stroke:f(s,.55),strokeWidth:"3",strokeDasharray:"".concat(F,", 100"),strokeLinecap:"round",fill:"none",transform:"rotate(-90 18 18)",className:"transition-all duration-700 ease-out",d:"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831"}),A>0&&(0,l.jsx)("g",{transform:"scale(0.88) translate(2.2 2.2)",className:"animate-pulse",children:(0,l.jsx)("path",{stroke:s,strokeWidth:"2.2",strokeDasharray:"".concat(A,", 100"),strokeLinecap:"round",fill:"none",transform:"rotate(-90 18 18)",className:"transition-all duration-700 ease-out",d:"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831"})})]}),(0,l.jsxs)("div",{className:"absolute inset-0 flex flex-col items-center justify-center text-xs font-bold text-[#374151] leading-tight",children:[(0,l.jsx)("div",{className:"text-sm",children:h(L)}),(0,l.jsx)("div",{className:"text-[10px] uppercase text-gray-500",children:Number(o||0)>Number(r||0)?"OVER":"LEFT"})]})]}),(0,l.jsxs)("div",{className:"text-xs text-gray-500 text-center mt-1",children:["Daily Goal = ",u(r),m(r)]})]}),(0,l.jsxs)("div",{className:"flex-1 flex flex-col w-full",children:[(0,l.jsxs)("div",{className:"date-nav mb-1",children:[(0,l.jsx)("button",{className:"px-2 text-lg ".concat(eD(ej)<=M?"opacity-30 cursor-not-allowed":""),onClick:()=>{eS(N(S(j(ej),-1)))},disabled:eD(ej)<=M,"aria-label":"Previous day",type:"button",children:"◀"}),(0,l.jsx)("div",{className:"text-[#374151] text-xs font-medium",children:eD(ej).toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric"})}),(0,l.jsx)("button",{className:"px-2 text-lg ".concat(k(ej,eN)>=0?"opacity-30 cursor-not-allowed":""),onClick:()=>{let e=N(S(j(ej),1));0>=k(e,eN)&&eS(e)},disabled:k(ej,eN)>=0,"aria-label":"Next day",type:"button",children:"▶"})]}),(0,l.jsx)("div",{className:"flex items-center gap-1 w-full py-2 justify-center px-3 pr-6",children:["M","Tu","W","Th","F","Sa","Su"].map(e=>{var t,n;let o=null!==(n=null===(t=a.days)||void 0===t?void 0:t[e])&&void 0!==n?n:0,i=Number(r);return(0,l.jsxs)("div",{className:"relative flex flex-col items-center w-6",children:[(0,l.jsxs)("div",{className:"relative w-5 h-20 flex flex-col items-center justify-end",children:[(0,l.jsxs)("div",{className:"absolute bottom-0 w-full h-full flex flex-col justify-end",children:[(0,l.jsx)("div",{className:"w-full h-6 rounded-t-sm border border-[#EAECEC] bg-[#DDE5ED]",style:{backgroundColor:i>0&&o>i?s:"#DDE5ED"}}),(0,l.jsx)("div",{className:"h-1"}),(0,l.jsx)("div",{className:"w-full h-14 rounded-b-sm border border-[#EAECEC] bg-[#DDE5ED]"})]}),(0,l.jsx)("div",{className:"absolute bottom-0 w-full rounded-b-sm",style:{height:"".concat((i>0?Math.min(o/i,1):0)*T*100,"%"),backgroundColor:f(s,.4)}})]}),(0,l.jsx)("div",{className:"text-xs text-[#374151] text-center mt-1",children:e}),e===O?(0,l.jsx)("div",{className:"text-[10px] text-[#BCA88F] leading-none mt-1",children:"★"}):(0,l.jsx)("div",{className:"h-[10px] mt-1"})]},e)})})]})]}),(0,l.jsxs)("div",{className:"w-full grid grid-cols-2 gap-3 mt-3",children:[(0,l.jsxs)("div",{className:"rounded-xl border border-gray-200 bg-white p-3 flex flex-col",children:[(0,l.jsx)("div",{className:"text-sm text-gray-500 mb-2",children:"Countdown"}),(0,l.jsx)("div",{className:"text-2xl font-mono tracking-wider text-[#374151]",children:v(eH)}),(0,l.jsxs)("div",{className:"text-[11px] text-gray-500 mt-1",children:["Starting from ",v(eW)," (time left today)"]}),(0,l.jsxs)("div",{className:"text-red-500 text-xs mt-1",children:["DEBUG: isFocusMode = ",p?"TRUE":"FALSE"]}),(0,l.jsxs)("div",{className:"flex gap-2 mt-3",children:[eL?(0,l.jsx)("button",{onClick:()=>{eO(!1),C(!1)},className:"h-9 px-3 text-sm rounded bg-gray-300 text-[#374151] font-medium",children:"Pause"}):(0,l.jsx)("button",{onClick:()=>{console.log("BEFORE: isFocusMode =",p),eO(!0),C(!0),console.log("AFTER: should be true now"),setTimeout(()=>{console.log("TIMEOUT: isFocusMode =",p)},100)},className:"h-9 px-3 text-sm rounded bg-[#6B7280] text-white font-medium",children:"Start"}),(0,l.jsx)("button",{onClick:function(){eO(!1),eJ(eW)},className:"h-9 px-3 text-sm rounded bg-gray-200 text-[#374151] font-medium disabled:opacity-50",disabled:eH===eW,children:"Reset"})]})]}),(0,l.jsxs)("div",{className:"rounded-xl border border-gray-200 bg-white p-3 flex flex-col",children:[(0,l.jsx)("div",{className:"text-sm text-gray-500 mb-2",children:"Log Time Completed"}),(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-[11px] text-gray-500 mb-1",children:"Hours"}),(0,l.jsx)("input",{type:"number",inputMode:"numeric",value:eF,onChange:e=>eI(e.target.value),className:"w-full border border-gray-300 rounded px-3 py-2 text-[#374151]",placeholder:"0",min:"0"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-[11px] text-gray-500 mb-1",children:"Minutes"}),(0,l.jsx)("input",{type:"number",inputMode:"numeric",value:eA,onChange:e=>eT(e.target.value),className:"w-full border border-gray-300 rounded px-3 py-2 text-[#374151]",placeholder:"0",min:"0"})]})]}),(0,l.jsxs)("div",{className:"mt-3 flex gap-2",children:[(0,l.jsx)("button",{onClick:function(){let e=Math.max(0,Number(eF||0))+Math.max(0,Number(eA||0))/60;e&&(eY(-e),eI(""),eT(""))},className:"h-9 px-3 text-sm rounded border border-red-400 text-red-600 font-medium",children:"Remove"}),(0,l.jsx)("button",{onClick:function(){let e=Math.max(0,Number(eF||0))+Math.max(0,Number(eA||0))/60;e&&(eY(e),eI(""),eT(""))},className:"h-9 px-3 text-sm rounded text-white font-medium border",style:{backgroundColor:f(s,.4),borderColor:s,borderWidth:"3px"},children:"Add"})]})]})]}),(0,l.jsx)(d,{focusAreaId:a.label,focusContext:{name:a.label,goal:a.goal,weekLogged:["M","Tu","W","Th","F","Sa","Su"].reduce((e,t)=>{var l;return e+Number((null==a?void 0:null===(l=a.days)||void 0===l?void 0:l[t])||0)},0),leftToday:function(e,t){var a;let l=new Date(t),s=["Su","M","Tu","W","Th","F","Sa"][l.getDay()],r=Number((null==e?void 0:e.goal)||0),n=Number((null==e?void 0:null===(a=e.days)||void 0===a?void 0:a[s])||0),o=Object.values((null==e?void 0:e.days)||{}).reduce((e,t)=>e+(Number(t)||0),0),i=new Date(l);return i.setDate(l.getDate()-(l.getDay()+6)%7),i.setHours(0,0,0,0),{todaySpent:n,leftToday:Math.max(0,r-n),totalWeek:o,dailyAverage:o/Math.max(1,Math.floor((l-i)/864e5)+1),weeklyGoal:7*r}}(a,ej||ek).leftToday}},a.label),(()=>{let e=["M","Tu","W","Th","F","Sa","Su"],t=e.reduce((e,t)=>{var l;return e+Number((null==a?void 0:null===(l=a.days)||void 0===l?void 0:l[t])||0)},0),s=["Su","M","Tu","W","Th","F","Sa"][new Date().getDay()],n=J?Math.max(1,e.indexOf(s)+1):7,o=7*Number(r||0),i=o-t;return(0,l.jsxs)("div",{className:"rounded-2xl border-2 border-gray-200 bg-white p-3 mt-3",children:[(0,l.jsx)("div",{className:"text-sm text-gray-500 mb-2",children:"Data"}),(0,l.jsxs)("div",{className:"grid grid-cols-3 gap-3 text-[#374151]",children:[(0,l.jsxs)("div",{className:"rounded-xl border border-gray-200 bg-white px-3 py-2",children:[(0,l.jsx)("div",{className:"text-[11px] text-gray-500",children:"Total this week"}),(0,l.jsx)("div",{className:"font-semibold",children:g(t)})]}),(0,l.jsxs)("div",{className:"rounded-xl border border-gray-200 bg-white px-3 py-2",children:[(0,l.jsx)("div",{className:"text-[11px] text-gray-500",children:"Daily avg"}),(0,l.jsx)("div",{className:"font-semibold",children:g(t/n)})]}),(0,l.jsxs)("div",{className:"rounded-xl border border-gray-200 bg-white px-3 py-2",children:[(0,l.jsx)("div",{className:"text-[11px] text-gray-500",children:"Weekly goal"}),(0,l.jsx)("div",{className:"font-semibold",children:g(o)})]})]}),(0,l.jsx)("div",{className:"mt-2 text-[12px] text-gray-600",children:i>=0?(0,l.jsxs)(l.Fragment,{children:["Weekly: ",g(i)," LEFT"]}):(0,l.jsxs)(l.Fragment,{children:["Weekly: ",g(Math.abs(i))," OVER"]})})]})})(),(0,l.jsxs)("div",{className:"rounded-2xl border-2 border-gray-200 bg-white p-3 mt-3",children:[(0,l.jsx)("div",{className:"text-[#374151] font-semibold text-base mb-2",children:(0,l.jsx)("span",{children:"Timeline - Future Planning"})}),(0,l.jsxs)("div",{className:"text-[12px] text-gray-600 mb-3",children:["Showing events from ",(0,l.jsx)("strong",{children:H.toLocaleDateString()})," to ",(0,l.jsx)("strong",{children:z.toLocaleDateString()}),"."]}),eG&&(0,l.jsx)("div",{className:"fixed inset-0 backdrop-blur-sm bg-white/30 flex items-center justify-center z-50",children:(0,l.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-5 w-[90%] max-w-md",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,l.jsx)("h3",{className:"text-lg font-semibold text-[#374151]",children:"Plan Future Session"}),(0,l.jsx)("button",{onClick:()=>eR(!1),className:"text-sm text-gray-500",children:"Close"})]}),(0,l.jsx)("div",{className:"text-[12px] text-gray-600 mb-3",children:"Schedule upcoming time blocks for this focus area"}),(0,l.jsx)("label",{className:"block text-xs text-gray-600 mb-1",children:"Title"}),(0,l.jsx)("input",{value:eV.title||"",onChange:e=>eK(t=>({...t,title:e.target.value})),className:"w-full border border-gray-300 rounded px-3 py-2 mb-3 text-[#374151]",placeholder:"e.g., Product Development"}),(0,l.jsx)("label",{className:"block text-xs text-gray-600 mb-1",children:"Focus Area"}),(0,l.jsx)("select",{value:eV.area||a.label||"",onChange:e=>eK(t=>({...t,area:e.target.value})),className:"w-full border border-gray-300 rounded px-3 py-2 mb-1 text-[#374151]",children:(Y||[]).map(e=>(0,l.jsx)("option",{value:e.label,children:e.label},e.label))}),(0,l.jsx)("div",{className:"text-[11px] text-gray-500 mb-3",children:"Event color follows the Focus Area"}),(0,l.jsx)("label",{className:"block text-xs text-gray-600 mb-1",children:"Date"}),(0,l.jsx)("input",{ref:e_,type:"date",value:eV.date||ej,onChange:e=>eK(t=>({...t,date:e.target.value})),className:"w-full border border-gray-300 rounded px-3 py-2 text-[#374151] mb-3"}),(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-xs text-gray-600 mb-1",children:"Start"}),(0,l.jsx)("input",{type:"time",value:eV.start||"09:00",onChange:e=>eK(t=>({...t,start:e.target.value})),className:"w-full border border-gray-300 rounded px-3 py-2 text-[#374151]"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-xs text-gray-600 mb-1",children:"End"}),(0,l.jsx)("input",{type:"time",value:eV.end||"10:00",onChange:e=>eK(t=>({...t,end:e.target.value})),className:"w-full border border-gray-300 rounded px-3 py-2 text-[#374151]"})]})]}),(0,l.jsx)("label",{className:"block text-xs text-gray-600 mb-1 mt-3",children:"Notes"}),(0,l.jsx)("textarea",{value:eV.notes||"",onChange:e=>eK(t=>({...t,notes:e.target.value})),className:"w-full min-h-[80px] border border-gray-300 rounded px-3 py-2 text-[#374151]",placeholder:"What will you do during this session?"}),(0,l.jsxs)("div",{className:"mt-4 flex justify-end gap-2",children:[(0,l.jsx)("button",{onClick:()=>eR(!1),className:"px-3 py-2 rounded bg-gray-200 text-[#374151]",children:"Cancel"}),(0,l.jsx)("button",{onClick:function(){if(!(null==eV?void 0:eV.date)||!(null==eV?void 0:eV.start)||!(null==eV?void 0:eV.end)){eR(!1);return}let e=Date.now().toString(),[t,l,s]=eV.date.split("-").map(Number),[r,n]=eV.start.split(":").map(Number),[o,i]=eV.end.split(":").map(Number),c=new Date(t,l-1,s,r,n,0,0),d=new Date(t,l-1,s,o,i,0,0),u={id:e,title:eV.title||a.label,area:eV.area||a.label,start:c.toISOString(),end:d.toISOString(),allDay:!1,notes:eV.notes||""},m=[...B,u];try{console.log("Saving new event:",{newEvent:u,allEventsCount:B.length,updatedCount:m.length,startDate:c.toISOString(),endDate:d.toISOString(),startDateLocal:c.toLocaleString(),endDateLocal:d.toLocaleString(),inputDate:eV.date,inputStart:eV.start,inputEnd:eV.end}),localStorage.setItem("hourglassEvents:v1",JSON.stringify(m)),localStorage.setItem("calendarEvents",JSON.stringify(m)),setAllEvents(m),window.dispatchEvent(new Event("calendarEventsUpdated"));try{window.dispatchEvent(new StorageEvent("storage",{key:"calendarEvents",newValue:JSON.stringify(m),oldValue:JSON.stringify(B)}))}catch(e){console.warn("Failed to dispatch storage event:",e)}eK({date:"",start:"",end:""})}catch(e){console.warn("Failed to save event:",e)}eR(!1)},className:"px-3 py-2 rounded bg-[#BCA88F] text-white",children:"Add"})]})]})}),0===U.length?(0,l.jsx)("div",{className:"text-gray-400 text-sm",children:"No upcoming sessions. Add one in Calendar →"}):(0,l.jsx)("div",{className:"flex flex-col gap-2",children:U.map(e=>(0,l.jsxs)("div",{className:"rounded-lg p-2 flex justify-between items-center text-sm",style:{backgroundColor:f(s,.4),borderColor:s,borderWidth:"3px",borderStyle:"solid"},children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"font-semibold text-[#374151]",children:e.title||e.area}),(0,l.jsxs)("div",{className:"text-[#374151]/80",children:[new Date(e.start).toLocaleDateString(void 0,{weekday:"short",month:"short",day:"numeric"})," • ",new Date(e.start).toLocaleTimeString([],{hour:"numeric",minute:"2-digit"})," - ",new Date(e.end).toLocaleTimeString([],{hour:"numeric",minute:"2-digit"})]})]}),P&&(0,l.jsx)("button",{onClick:()=>{let t=new Date(e.start),l=new Date(e.end);eX(e.id),e1({title:e.title||e.area||"",area:e.area||a.label||"",dateYMD:D(t),start:eC(t),end:eC(l),notes:e.notes||e.description||""}),eq(!0)},className:"text-blue-700 hover:underline",children:"Edit"})]},e.id))})]})]})}),e$&&(0,l.jsx)("div",{className:"fixed inset-0 backdrop-blur-sm bg-white/30 flex items-center justify-center z-50",children:(0,l.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-5 w-[90%] max-w-md",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,l.jsx)("h3",{className:"text-lg font-semibold text-[#374151]",children:"Edit Event"}),(0,l.jsx)("button",{onClick:()=>eq(!1),className:"text-sm text-gray-500",children:"Close"})]}),(0,l.jsx)("label",{className:"block text-xs text-gray-600 mb-1",children:"Title"}),(0,l.jsx)("input",{value:e0.title,onChange:e=>e1(t=>({...t,title:e.target.value})),className:"w-full border border-gray-300 rounded px-3 py-2 mb-3 text-[#374151]"}),(0,l.jsx)("label",{className:"block text-xs text-gray-600 mb-1",children:"Focus Area"}),(0,l.jsx)("select",{value:e0.area,onChange:e=>e1(t=>({...t,area:e.target.value})),className:"w-full border border-gray-300 rounded px-3 py-2 mb-3 text-[#374151]",children:(Y||[]).map(e=>(0,l.jsx)("option",{value:e.label,children:e.label},e.label))}),(0,l.jsx)("label",{className:"block text-xs text-gray-600 mb-1",children:"Date"}),(0,l.jsx)("input",{ref:eZ,type:"date",value:e0.dateYMD,onChange:e=>e1(t=>({...t,dateYMD:e.target.value})),className:"w-full border border-gray-300 rounded px-3 py-2 mb-3 text-[#374151]"}),(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-xs text-gray-600 mb-1",children:"Start"}),(0,l.jsx)("input",{type:"time",value:e0.start,onChange:e=>e1(t=>({...t,start:e.target.value})),className:"w-full border border-gray-300 rounded px-3 py-2 text-[#374151]"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-xs text-gray-600 mb-1",children:"End"}),(0,l.jsx)("input",{type:"time",value:e0.end,onChange:e=>e1(t=>({...t,end:e.target.value})),className:"w-full border border-gray-300 rounded px-3 py-2 text-[#374151]"})]})]}),(0,l.jsx)("label",{className:"block text-xs text-gray-600 mb-1 mt-3",children:"Notes"}),(0,l.jsx)("textarea",{value:e0.notes,onChange:e=>e1(t=>({...t,notes:e.target.value})),className:"w-full min-h-[80px] border border-gray-300 rounded px-3 py-2 text-[#374151]"}),(0,l.jsxs)("div",{className:"mt-4 flex justify-between items-center",children:[(0,l.jsx)("button",{onClick:()=>{let e=localStorage.getItem("hourglassEvents:v1")||localStorage.getItem("calendarEvents"),t=(e?x(e,[]):[]).filter(e=>e.id!==eQ);try{localStorage.setItem("hourglassEvents:v1",JSON.stringify(t)),localStorage.setItem("calendarEvents",JSON.stringify(t)),window.dispatchEvent(new Event("calendarEventsUpdated"))}catch(e){}eq(!1)},className:"px-3 py-2 rounded bg-red-500 text-white",children:"Delete"}),(0,l.jsxs)("div",{className:"flex gap-2",children:[(0,l.jsx)("button",{onClick:()=>eq(!1),className:"px-3 py-2 rounded bg-gray-200 text-[#374151]",children:"Cancel"}),(0,l.jsx)("button",{onClick:()=>{let e=localStorage.getItem("hourglassEvents:v1")||localStorage.getItem("calendarEvents"),t=e?x(e,[]):[],a=eE(e0.dateYMD,e0.start),l=eE(e0.dateYMD,e0.end),s=t.map(e=>e.id===eQ?{...e,title:e0.title||e0.area||e.title||e.area,area:e0.area||e.area,start:a,end:l,notes:e0.notes||""}:e);try{localStorage.setItem("hourglassEvents:v1",JSON.stringify(s)),localStorage.setItem("calendarEvents",JSON.stringify(s)),window.dispatchEvent(new Event("calendarEventsUpdated"))}catch(e){}eq(!1)},className:"px-3 py-2 rounded bg-[#BCA88F] text-white",children:"Save"})]})]})]})})]}),(0,l.jsx)("button",{onClick:()=>e.push("/notes"),className:"fixed bottom-20 right-4 bg-[#6B7280] text-white rounded-full w-12 h-12 flex items-center justify-center text-2xl shadow-md z-[10000]","aria-label":"Go to Notes",children:(0,l.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),(0,l.jsx)("div",{className:"fixed bottom-0 left-0 right-0 p-3 pb-7 z-[9999]",children:(0,l.jsxs)("div",{className:"max-w-md mx-auto grid grid-cols-3 gap-3",children:[(0,l.jsx)("button",{className:"h-12 w-full rounded-2xl bg-white text-gray-700 font-medium border-2 border-gray-200 hover:bg-gray-50 transition-colors duration-200 shadow-sm",onClick:()=>{q(!1),c(null)},"aria-current":"page",children:"Dashboard"}),(0,l.jsx)("button",{onClick:()=>e.push("/calendar"),className:"h-12 w-full rounded-2xl bg-white text-gray-700 font-medium border-2 border-gray-200 hover:bg-gray-50 transition-colors duration-200 shadow-sm",children:"Calendar"}),(0,l.jsx)("button",{onClick:()=>e.push("/connect"),className:"h-12 w-full rounded-2xl bg-white text-gray-700 font-medium border-2 border-gray-200 hover:bg-gray-50 transition-colors duration-200 shadow-sm",children:"Discover"})]})}),(0,l.jsx)("div",{className:"fixed bottom-0 left-0 right-0 p-3 pb-7 z-[99999]",children:(0,l.jsxs)("div",{className:"max-w-md mx-auto grid grid-cols-3 gap-3",children:[(0,l.jsx)("button",{className:"h-12 w-full rounded-2xl bg-white text-gray-700 font-medium border-2 border-gray-200 hover:bg-gray-50 transition-colors duration-200 shadow-sm",onClick:()=>{q(!1),c(null)},"aria-current":"page",children:"Dashboard"}),(0,l.jsx)("button",{onClick:()=>e.push("/calendar"),className:"h-12 w-full rounded-2xl bg-white text-gray-700 font-medium border-2 border-gray-200 hover:bg-gray-50 transition-colors duration-200 shadow-sm",children:"Calendar"}),(0,l.jsx)("button",{onClick:()=>e.push("/connect"),className:"h-12 w-full rounded-2xl bg-white text-gray-700 font-medium border-2 border-gray-200 hover:bg-gray-50 transition-colors duration-200 shadow-sm",children:"Discover"})]})})]})}return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"min-h-screen bg-white text-gray-900 pb-40 font-sans flex flex-col gap-6",children:[(0,l.jsxs)("header",{className:"w-full pt-16 pb-3 px-4 flex justify-between items-center",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)("button",{className:"text-gray-700 text-xl px-3 ".concat(t<=-364?"opacity-30 cursor-not-allowed":"hover:text-gray-900"),"aria-label":"Previous Week",onClick:()=>{t<=-364||(a(e=>Math.max(-364,e-7)),o(!1))},disabled:t<=-364,children:"‹"}),(0,l.jsx)("div",{className:"text-gray-900 font-bold text-lg",children:A}),(0,l.jsx)("button",{className:"text-gray-700 text-xl px-3 ".concat(t>=7?"opacity-30 cursor-not-allowed":"hover:text-gray-900"),"aria-label":"Next Week",onClick:()=>{t>=7||(a(e=>Math.min(7,e+7)),o(!0))},disabled:t>=7,children:"›"})]}),(0,l.jsx)("div",{className:"ml-auto",children:(0,l.jsx)("button",{onClick:()=>e.push("/settings"),title:"Settings","aria-label":"Settings",className:"inline-flex items-center justify-center w-10 h-10 rounded-xl bg-gray-100 border border-gray-200 text-gray-600 hover:bg-gray-200 hover:text-gray-800 transition-colors duration-200",children:(0,l.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"w-5 h-5",children:[(0,l.jsx)("path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"}),(0,l.jsx)("circle",{cx:"12",cy:"12",r:"3"})]})})})]}),(0,l.jsxs)("div",{className:"bg-white rounded-2xl p-6 shadow-lg border border-gray-100",children:[(0,l.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,l.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"Focus Areas"}),(0,l.jsxs)("div",{className:"text-sm whitespace-nowrap ".concat(eb>_?"text-red-600":"text-gray-600"),children:[(0,l.jsx)("span",{className:"font-semibold",children:u(eb)})," out of ",_," hours planned today"]})]}),ev>0&&(0,l.jsxs)("div",{className:"rounded-xl border border-red-200 bg-red-50 text-red-700 text-sm px-4 py-3 mb-4",children:["Your focus area daily goals add up to ",u(eb),"hrs (over by ",u(ev),"hrs). Please reduce one or more daily goals so the total is ",_,"hrs or less."]}),(0,l.jsxs)("div",{className:"flex flex-col gap-3",children:[[...ew].reverse().map((e,t)=>{var a;let{label:s,timeSpent:r,goal:n,days:o,color:i}=e,d=Number(null!=n?n:0),x=Number(null!==(a=null==o?void 0:o[eg])&&void 0!==a?a:0),g=Math.min(d>0?x/d*100:0,100).toFixed(0),b=x>d?Math.min(d>0?(x-d)/d*100:0,100).toFixed(0):0,v={color:i},p=(null==v?void 0:v.color)||"#6B7280";eD(ek).getDay();let y=14/21;return(0,l.jsxs)("div",{onClick:()=>{c({label:s,timeSpent:r,goal:n,days:o,color:i});let e=new Date;eS(D(e>=M&&e<=F?e:M))},className:"bg-white p-4 rounded-xl shadow-sm border border-gray-100 w-full flex flex-row items-center gap-4 relative cursor-pointer hover:shadow-md transition-shadow duration-200",children:[P&&(0,l.jsx)("button",{type:"button",className:"absolute -top-1 right-2 text-[#374151] text-xl px-2","aria-label":"Delete or Rename",onClick:e=>{e.stopPropagation(),eo(s),ec(s),eu(n||0),ex(i||"#6B7280")},children:"⋯"}),(0,l.jsxs)("div",{className:"flex flex-row items-center gap-5 w-full",children:[(0,l.jsxs)("div",{className:"flex flex-col items-center w-28",children:[(0,l.jsx)("div",{className:"".concat(s.length>12?"text-xs":"text-sm"," font-bold text-gray-900 text-center"),children:s}),(0,l.jsxs)("div",{className:"relative w-20 h-20",children:[(0,l.jsxs)("svg",{className:"w-full h-full",viewBox:"0 0 36 36",children:[(0,l.jsx)("path",{className:"text-gray-300",stroke:"currentColor",strokeWidth:"3",fill:"none",d:"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831"}),(0,l.jsx)("path",{stroke:f(p,.55),strokeWidth:"3",strokeDasharray:"".concat(g,", 100"),strokeLinecap:"round",fill:"none",transform:"rotate(-90 18 18)",d:"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831"}),b>0&&(0,l.jsx)("g",{transform:"scale(0.88) translate(2.2 2.2)",children:(0,l.jsx)("path",{stroke:p,strokeWidth:"2.2",strokeDasharray:"".concat(b,", 100"),strokeLinecap:"round",fill:"none",transform:"rotate(-90 18 18)",d:"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831"})})]}),(0,l.jsxs)("div",{className:"absolute inset-0 flex flex-col items-center justify-center text-xs font-bold text-gray-900 leading-tight",children:[(0,l.jsx)("div",{className:"text-xs",children:h(x>d?x-d:d-x)}),(0,l.jsx)("div",{className:"text-[9px] uppercase text-gray-600",children:Number(x||0)>Number(d||0)?"OVER":"LEFT"})]})]}),(0,l.jsxs)("div",{className:"text-xs text-gray-600 text-center font-medium",children:["Daily Goal = ",u(null!=n?n:0),m(null!=n?n:0)]})]}),(0,l.jsx)("div",{className:"flex justify-center items-center gap-4 w-full py-3",children:eh.map(e=>{var t;let a=null!==(t=null==o?void 0:o[e])&&void 0!==t?t:0,s=Number(null!=n?n:0);return(0,l.jsxs)("div",{className:"relative flex flex-col items-center",children:[(0,l.jsxs)("div",{className:"relative w-5 h-20 flex flex-col items-center justify-end",children:[(0,l.jsxs)("div",{className:"absolute bottom-0 w-full h-full flex flex-col justify-end",children:[(0,l.jsx)("div",{className:"w-full h-6 rounded-t-sm border border-[#EAECEC] bg-[#DDE5ED]",style:{backgroundColor:s>0&&a>s?p:"#DDE5ED"}}),(0,l.jsx)("div",{className:"h-1"}),(0,l.jsx)("div",{className:"w-full h-14 rounded-b-sm border border-[#EAECEC] bg-[#DDE5ED]"})]}),(0,l.jsx)("div",{className:"absolute bottom-0 w-full rounded-b-sm",style:{height:"".concat((s>0?Math.min(a/s,1):0)*y*100,"%"),backgroundColor:f(p,.4)}})]}),(0,l.jsx)("div",{className:"text-xs text-[#374151] text-center mt-1",children:e}),J&&e===eg?(0,l.jsx)("div",{className:"text-[10px] text-[#BCA88F] leading-none mt-1",children:"★"}):(0,l.jsx)("div",{className:"h-[10px] mt-1"})]},e)})})]})]},s)}),0===ew.length?P?(0,l.jsxs)(l.Fragment,{children:[n&&(0,l.jsx)("div",{className:"mb-2","aria-hidden":"true",role:"presentation",children:(0,l.jsx)("div",{className:"w-full rounded-xl bg-[#6B7280] text-white py-3 text-center font-medium shadow-sm select-none",children:"Continue working on last week's focus areas"})}),(0,l.jsxs)("div",{onClick:()=>{el(""),q(!0)},className:"relative bg-white p-3 rounded-xl shadow-md w-full flex flex-row items-center gap-3 opacity-50 cursor-pointer",children:[(0,l.jsxs)("div",{className:"flex flex-col items-center w-28",children:[(0,l.jsx)("div",{className:"text-sm font-semibold text-[#374151] text-center",children:"Add a Focus Area"}),(0,l.jsxs)("div",{className:"relative w-20 h-20",children:[(0,l.jsx)("svg",{className:"w-full h-full",viewBox:"0 0 36 36",children:(0,l.jsx)("path",{className:"text-gray-300",stroke:"currentColor",strokeWidth:"3",fill:"none",d:"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831"})}),(0,l.jsx)("div",{className:"absolute inset-0 flex items-center justify-center text-xs font-bold text-[#374151]",children:"0hrs left"})]}),(0,l.jsx)("div",{className:"text-xs text-gray-500 text-center",children:"Daily Goal = 0hrs"})]}),(0,l.jsx)("button",{className:"absolute -top-1 right-2 text-[#374151] text-xl px-2","aria-label":"Focus Area Options",tabIndex:-1,style:{pointerEvents:"none",opacity:1},children:"⋯"}),(0,l.jsx)("div",{className:"flex justify-between items-end flex-1 mt-2 w-full px-2 py-2",children:["M","Tu","W","Th","F","Sa","Su"].map(e=>(0,l.jsxs)("div",{className:"relative flex flex-col items-center",children:[(0,l.jsxs)("div",{className:"relative w-5 h-20 flex flex-col items-center justify-end",children:[(0,l.jsx)("div",{className:"w-full h-6 rounded-t-sm border border-[#EAECEC] bg-[#DDE5ED]"}),(0,l.jsx)("div",{className:"h-1"}),(0,l.jsx)("div",{className:"w-full h-14 rounded-b-sm border border-[#EAECEC] bg-[#DDE5ED]"})]}),(0,l.jsx)("div",{className:"text-xs text-[#374151] text-center mt-1",children:e}),J&&e===eg?(0,l.jsx)("div",{className:"text-[10px] text-[#BCA88F] leading-none mt-1",children:"★"}):(0,l.jsx)("div",{className:"h-[10px] mt-1"})]},e))})]})]}):(0,l.jsx)("div",{className:"mt-2 w-full rounded-xl border border-gray-200 bg-white text-[#374151]/70 py-6 text-center",children:"No logged focus areas."}):P?(0,l.jsx)(l.Fragment,{children:(0,l.jsx)("button",{onClick:()=>{if(el(""),eb>=24){el("Your focus area daily goals already total ".concat(u(eb),"hrs. Please adjust existing goals so the sum is 24hrs or less before adding another.")),q(!0);return}q(!0)},type:"button",className:"mt-4 w-full rounded-xl bg-[#6B7280] text-white py-3 font-semibold shadow-lg hover:bg-[#7A8F9A] active:bg-[#6B7A85] transition-all duration-200","aria-label":eM,children:eM})}):null]})]})]}),(0,l.jsx)("div",{className:"fixed bottom-0 left-0 right-0 p-3 pb-7 z-[9999]",children:(0,l.jsxs)("div",{className:"max-w-md mx-auto grid grid-cols-3 gap-3",children:[(0,l.jsx)("button",{className:"h-12 w-full rounded-2xl font-medium border-2 transition-colors duration-200 shadow-sm ".concat(i?"bg-white text-gray-700 border-gray-200 hover:bg-gray-50":"bg-gray-900 text-white font-semibold shadow-lg border-transparent"),onClick:()=>{q(!1),c(null)},"aria-current":"page",children:"Dashboard"}),(0,l.jsx)("button",{onClick:()=>e.push("/calendar"),className:"h-12 w-full rounded-2xl bg-white text-gray-700 font-medium border-2 border-gray-200 hover:bg-gray-50 transition-colors duration-200 shadow-sm",children:"Calendar"}),(0,l.jsx)("button",{onClick:()=>e.push("/connect"),className:"h-12 w-full rounded-2xl bg-white text-gray-700 font-medium border-2 border-gray-200 hover:bg-gray-50 transition-colors duration-200 shadow-sm",children:"Discover"})]})}),$&&(0,l.jsx)("div",{className:"fixed inset-0 backdrop-blur-sm bg-white/30 flex items-center justify-center z-50",children:(0,l.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6 w-[90%] max-w-md",children:[(0,l.jsx)("h2",{className:"text-lg font-bold mb-4 text-black",children:"Add a New Focus Area"}),(0,l.jsx)("input",{type:"text",placeholder:"Name",value:Q,onChange:e=>X(e.target.value),className:"w-full border border-gray-300 rounded px-3 py-2 mb-3 text-black"}),(0,l.jsxs)("div",{className:"mb-2",children:[(0,l.jsx)("input",{type:"number",placeholder:"Daily Goal (hours)",value:ee,onChange:e=>et(e.target.value),className:"w-full border border-gray-300 rounded px-3 py-2 text-black",min:0,step:.25,max:Math.max(0,ef)}),(0,l.jsxs)("div",{className:"mt-1 text-xs text-gray-500",children:[u(ef),"hrs available today (out of 24)"]})]}),(0,l.jsxs)("div",{className:"mb-4",children:[(0,l.jsx)("div",{className:"text-sm text-black mb-2",children:"Color"}),(0,l.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[["#6B7280","#9CA3AF","#9ACD32","#E46C6C","#7D7ACF","#F2C94C","#56CCF2"].map(e=>(0,l.jsx)("button",{type:"button",onClick:()=>ey(e),className:"w-7 h-7 rounded-full border",style:{backgroundColor:e,outline:ep===e?"2px solid #374151":"none"},"aria-label":"Choose color ".concat(e)},e)),(0,l.jsxs)("label",{className:"ml-1 text-sm text-black flex items-center gap-2",children:["Custom:",(0,l.jsx)("input",{type:"color",value:ep,onChange:e=>ey(e.target.value),className:"w-8 h-8 p-0 border rounded","aria-label":"Custom color"})]})]})]}),ea?(0,l.jsx)("div",{className:"mb-3 text-sm text-red-600",role:"alert",children:ea}):null,(0,l.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,l.jsx)("button",{onClick:()=>{el(""),q(!1)},className:"px-4 py-2 bg-gray-300 rounded",children:"Cancel"}),(0,l.jsx)("button",{onClick:()=>{let e=parseFloat(ee);if(!Q||isNaN(e)||e<=0){el("Please enter a name and a goal greater than 0.");return}if(eb+e>24){el("This would put you over 24hrs today. You have ".concat(u(ef),"hrs available."));return}let t=[...Y,{label:Q,timeSpent:0,goal:e,days:[],color:ep}];z(t),Z(t),q(!1),X(""),et(""),el("")},className:"px-4 py-2 bg-gray-700 text-white rounded",children:"Add"})]})]})}),en&&(0,l.jsx)("div",{className:"fixed inset-0 backdrop-blur-sm bg-white/30 flex items-center justify-center z-50",children:(0,l.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6 w-[90%] max-w-md",children:[(0,l.jsx)("h2",{className:"text-lg font-bold mb-4 text-black",children:"Edit Focus Area"}),(0,l.jsx)("p",{className:"text-sm text-gray-600 mb-3",children:"Changing the name or goal will update it everywhere, including today's dashboard, your calendar events, and saved notes."}),(0,l.jsxs)("div",{className:"mb-4",children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Name"}),(0,l.jsx)("input",{type:"text",value:ei,onChange:e=>ec(e.target.value),className:"w-full border border-gray-300 rounded px-3 py-2 text-black",placeholder:"Focus area name"})]}),(0,l.jsxs)("div",{className:"mb-4",children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Daily Goal (hours)"}),(0,l.jsx)("input",{type:"number",value:ed,onChange:e=>eu(e.target.value),className:"w-full border border-gray-300 rounded px-3 py-2 text-black",placeholder:"0.0",min:"0",step:"0.25",max:"24"})]}),(0,l.jsxs)("div",{className:"mb-4",children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Color"}),(0,l.jsxs)("div",{className:"flex items-center gap-3",children:[(0,l.jsx)("input",{type:"color",value:em,onChange:e=>ex(e.target.value),className:"w-12 h-10 border border-gray-300 rounded cursor-pointer"}),(0,l.jsx)("div",{className:"flex-1",children:(0,l.jsx)("input",{type:"text",value:em,onChange:e=>ex(e.target.value),className:"w-full border border-gray-300 rounded px-3 py-2 text-black text-sm",placeholder:"#6B7280"})})]}),(0,l.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"This color will be used for rings, calendar events, and progress bars"})]}),(0,l.jsxs)("div",{className:"flex justify-between items-center gap-3",children:[(0,l.jsx)("button",{onClick:()=>{eo(null),ec(""),eu(""),ex("#6B7280")},className:"px-4 py-2 bg-gray-300 rounded",children:"Cancel"}),(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)("button",{onClick:()=>{er(en),eo(null)},className:"px-3 py-2 border border-red-400 text-red-600 rounded",children:"Delete"}),(0,l.jsx)("button",{onClick:()=>{let e=(ei||"").trim(),t=parseFloat(ed)||0;if(!e)return;if(t<0||t>24){alert("Daily goal must be between 0 and 24 hours.");return}let a=(Y||[]).some(t=>b(t.label)===b(e));if(b(en)!==b(e)&&a){alert("Another focus area already uses that name.");return}let l=(Y||[]).map(a=>a.label===en?{...a,label:e,goal:t,color:em}:a);z(l),Z(l),function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;for(let l of["focusCategories",L+O,L+W,L+T(new Date(Date.now()+6048e5))])try{let s=localStorage.getItem(l);if(!s)continue;let r=x(s,[]),n=Array.isArray(r)?r.map(l=>b(l.label)===b(e)?{...l,label:t,...a&&{color:a}}:l):r;localStorage.setItem(l,JSON.stringify(n))}catch(e){}try{let a="focusNotes:".concat(e),l="focusNotes:".concat(t),s=localStorage.getItem(a);s&&!localStorage.getItem(l)&&localStorage.setItem(l,s),s&&localStorage.removeItem(a)}catch(e){}for(let l of["hourglassEvents:v1","calendarEvents","calendar-items","events"])try{let s=localStorage.getItem(l);if(!s)continue;let r=x(s,[]);if(!Array.isArray(r))continue;let n=r.map(l=>{let s=l.area||l.focusArea||l.category||l.label||"";if(b(s)===b(e)){let e={...l};return"area"in e&&(e.area=t),"focusArea"in e&&(e.focusArea=t),"category"in e&&(e.category=t),a&&(e.color=a),e}return l});localStorage.setItem(l,JSON.stringify(n))}catch(e){}try{window.dispatchEvent(new Event("focusCategoriesUpdated"))}catch(e){}try{window.dispatchEvent(new Event("calendarEventsUpdated"))}catch(e){}}(en,e,em),eo(null),ec(""),eu(""),ex("#6B7280")},className:"px-4 py-2 bg-gray-700 text-white rounded",children:"Save"})]})]})]})}),es&&(0,l.jsx)("div",{className:"fixed inset-0 backdrop-blur-sm bg-white/30 flex items-center justify-center z-50",children:(0,l.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6 w-[90%] max-w-md",children:[(0,l.jsx)("h2",{className:"text-lg font-bold mb-4 text-black",children:"Delete Focus Area"}),(0,l.jsxs)("p",{className:"mb-6 text-black",children:["Are you sure you want to delete ",(0,l.jsx)("strong",{children:es}),"?"]}),(0,l.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,l.jsx)("button",{onClick:()=>er(null),className:"px-4 py-2 bg-gray-300 rounded",children:"Cancel"}),(0,l.jsx)("button",{onClick:()=>{let e=Y.filter(e=>e.label!==es);z(e),Z(e);let t=e=>(e||"").toString().trim().toLowerCase();for(let e of["hourglassEvents:v1","calendarEvents","calendar-items","events"])try{let a=localStorage.getItem(e);if(!a)continue;let l=x(a,[]);if(!Array.isArray(l))continue;let s=l.filter(e=>{let a=e.area||e.focusArea||e.category||e.label||"";return t(a)!==t(es)});localStorage.setItem(e,JSON.stringify(s))}catch(e){}try{window.dispatchEvent(new Event("calendarEventsUpdated"))}catch(e){}er(null)},className:"px-4 py-2 bg-red-500 text-white rounded",children:"Delete"})]})]})}),(0,l.jsx)("button",{onClick:()=>e.push("/notes"),className:"fixed bottom-20 right-4 bg-[#6B7280] text-white rounded-full w-12 h-12 flex items-center justify-center text-2xl shadow-md z-[10000]","aria-label":"Go to Notes",children:(0,l.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),(0,l.jsx)("div",{className:"fixed bottom-0 left-0 right-0 p-3 pb-7 z-[99999]",children:(0,l.jsxs)("div",{className:"max-w-md mx-auto grid grid-cols-3 gap-3",children:[(0,l.jsx)("button",{className:"h-12 w-full rounded-2xl bg-gray-900 text-white font-semibold shadow-lg",onClick:()=>{q(!1),c(null)},"aria-current":"page",children:"Dashboard"}),(0,l.jsx)("button",{onClick:()=>e.push("/calendar"),className:"h-12 w-full rounded-2xl bg-white text-gray-700 font-medium border-2 border-gray-200 hover:bg-gray-50 transition-colors duration-200 shadow-sm",children:"Calendar"}),(0,l.jsx)("button",{onClick:()=>e.push("/connect"),className:"h-12 w-full rounded-2xl bg-white text-gray-700 font-medium border-2 border-gray-200 hover:bg-gray-50 transition-colors duration-200 shadow-sm",children:"Discover"})]})}),p&&(0,l.jsxs)("div",{style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",backgroundColor:"black",zIndex:99999,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",color:"white"},children:[(0,l.jsx)("div",{style:{fontSize:"4rem",fontFamily:"monospace",marginBottom:"2rem"},children:v(eH)}),(0,l.jsx)("div",{style:{fontSize:"1.5rem",color:"#999",marginBottom:"3rem"},children:(null==i?void 0:i.label)||"Focus Session"}),(0,l.jsx)("button",{onClick:()=>C(!1),style:{fontSize:"2rem",color:"#666",background:"none",border:"none",cursor:"pointer"},children:"\xd7"})]})]})}function E(){return(0,l.jsx)(s.Suspense,{fallback:(0,l.jsx)("div",{children:"Loading..."}),children:(0,l.jsx)(C,{})})}},2778:function(){}},function(e){e.O(0,[461,378,971,117,744],function(){return e(e.s=6590)}),_N_E=e.O()}]);