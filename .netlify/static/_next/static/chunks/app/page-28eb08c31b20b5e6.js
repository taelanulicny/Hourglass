(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{296:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>g});var s=a(5155);a(347);var r=a(2115),l=a(5695);function n(e){return(Math.round(10*(Number(e)||0))/10).toFixed(1).replace(/\.0$/,"")}function o(e){return 1===Number(e)?"hr":"hrs"}function i(e){let t=Math.max(0,Number(e)||0);if(t<1){let e=Math.round(60*t);return"".concat(e," ").concat(1===e?"min":"mins")}return"".concat(n(t)).concat(o(t))}function d(e){let t=Math.max(0,Number(e)||0),a=Math.floor(t),s=Math.round((t-a)*60);return a>0&&s>0?"".concat(a,"hrs ").concat(s,"mins"):a>0?"".concat(a,"hrs"):"".concat(s,"mins")}function c(e){return(e||"").toString().trim().toLowerCase().replace(/[-_]+/g," ")}function u(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.55;if(!e)return"rgba(140, 164, 175, ".concat(t,")");let a=e.trim();"#"===a[0]&&(a=a.slice(1)),3===a.length&&(a=a.split("").map(e=>e+e).join(""));let s=parseInt(a,16);return"rgba(".concat(s>>16&255,", ").concat(s>>8&255,", ").concat(255&s,", ").concat(t,")")}function x(e){let t=Math.max(0,Math.floor(e)),a=Math.floor(t/3600),s=Math.floor(t%3600/60),r=e=>String(e).padStart(2,"0");return"".concat(r(a),":").concat(r(s),":").concat(r(t%60))}function m(e){let t=new Date(e),a=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0");return"".concat(a,"-").concat(s,"-").concat(r)}function h(e){try{localStorage.setItem("friends:v1",JSON.stringify(e||[]))}catch(e){}}function g(){let e=(0,l.useRouter)(),[t,a]=(0,r.useState)(""),[g,b]=(0,r.useState)(!1),[p,f]=(0,r.useState)(""),[v,y]=(0,r.useState)([]),N=(0,r.useRef)(null);async function j(e){if(!t.trim())return;let s=t.trim(),r={type:"user",content:s,timestamp:new Date};y(e=>[...e,r]),a(""),f(""),b(!0);try{var l;let t=function(e,t){var a;let s=new Date(t),r=["Su","M","Tu","W","Th","F","Sa"][s.getDay()],l=Number((null==e?void 0:e.goal)||0),n=Number((null==e||null==(a=e.days)?void 0:a[r])||0),o=Math.max(0,l-n),i=Object.values((null==e?void 0:e.days)||{}).reduce((e,t)=>e+(Number(t)||0),0),d=new Date(s);d.setDate(s.getDate()-(s.getDay()+6)%7),d.setHours(0,0,0,0);let c=Math.max(1,Math.floor((s-d)/864e5)+1);return{todaySpent:n,leftToday:o,totalWeek:i,dailyAverage:i/c,weeklyGoal:7*l}}(e,ev),a="";try{let t="focusNotes:".concat(e.label);a=localStorage.getItem(t)||""}catch(e){}let r={userMessage:s,focusArea:{label:e.label,category:(null==(l=e.meta)?void 0:l.category)||"Other",goal:e.goal,color:e.color,days:e.days||{}},weeklyStats:{todaySpent:t.todaySpent,leftToday:t.leftToday,totalWeek:t.totalWeek,dailyAverage:t.dailyAverage,weeklyGoal:t.weeklyGoal,selectedDate:ev,weekKey:J,isCurrentWeek:R,isNextWeek:E},notes:a||"",currentWeekKey:J,selectedDate:ev},n=await fetch("/api/ai/assist",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}),o=await n.json();if(!(null==o?void 0:o.ok))throw Error((null==o?void 0:o.error)||"AI failed");let i={type:"ai",content:o.text||"",timestamp:new Date};y(e=>[...e,i])}catch(t){let e={type:"error",content:t.message||"Something went wrong.",timestamp:new Date};y(t=>[...t,e]),f(t.message||"Something went wrong.")}finally{b(!1)}}(0,r.useEffect)(()=>{N.current&&(N.current.scrollTop=N.current.scrollHeight)},[v]);let[w,S]=(0,r.useState)(0),[E,k]=(0,r.useState)(!1),[C,D]=(0,r.useState)(null),A=new Date;A.setDate(A.getDate()+w);let F=new Date(A);F.setDate(A.getDate()-(A.getDay()+6)%7),F.setHours(0,0,0,0);let M=new Date(F);M.setDate(F.getDate()+6),M.setHours(23,59,59,999);let T=e=>e.toLocaleDateString("en-US",{month:"long",day:"numeric"}),O="".concat(T(F)," – ").concat(T(M)),I=e=>{let t=new Date(e);return t.setDate(e.getDate()-(e.getDay()+6)%7),t.setHours(0,0,0,0),"".concat(t.getFullYear(),"-").concat(String(t.getMonth()+1).padStart(2,"0"),"-").concat(String(t.getDate()).padStart(2,"0"))},L="focusCategories:week:",[W]=(0,r.useState)(()=>I(new Date)),[J,B]=(0,r.useState)(()=>I(A)),P=I(new Date(Date.now()+6048e5)),R=J===W;(0,r.useEffect)(()=>{k(J===P)},[J,P]);let Y=R||E;(0,r.useEffect)(()=>{B(I(A))},[w]);let[G,H]=(0,r.useState)([]);function U(e){try{if(localStorage.setItem(L+J,JSON.stringify(e)),J===W){localStorage.setItem("focusCategories",JSON.stringify(e));try{window.dispatchEvent(new Event("focusCategoriesUpdated"))}catch(e){}}}catch(e){}}(0,r.useEffect)(()=>{let e=L+J,t=[];try{if(J===W){let a=localStorage.getItem("focusCategories");if(a)t=JSON.parse(a)||[],localStorage.setItem(e,JSON.stringify(t));else{let a=localStorage.getItem(e);t=a&&JSON.parse(a)||[]}}else{let a=localStorage.getItem(e);t=a&&JSON.parse(a)||[]}}catch(e){t=[]}H(t)},[J,W]),(0,r.useEffect)(()=>{let e=()=>{try{let e=localStorage.getItem("focusCategories");if(!e)return;let t=JSON.parse(e)||[];try{localStorage.setItem(L+W,JSON.stringify(t))}catch(e){}J!==W&&B(W),H(t)}catch(e){}},t=t=>{let a=null==t?void 0:t.key;a&&"focusCategories"!==a&&"focusCategories:lastUpdate"!==a||e()},a=()=>{"visible"===document.visibilityState&&e()};return window.addEventListener("focusCategoriesUpdated",e),window.addEventListener("storage",t),document.addEventListener("visibilitychange",a),()=>{window.removeEventListener("focusCategoriesUpdated",e),window.removeEventListener("storage",t),document.removeEventListener("visibilitychange",a)}},[J,W]);let[z,_]=(0,r.useState)(!1),[K,V]=(0,r.useState)(""),[q,$]=(0,r.useState)(""),[Q,X]=(0,r.useState)(""),[Z,ee]=(0,r.useState)(null),[et,ea]=(0,r.useState)(null),[es,er]=(0,r.useState)(""),el=["M","Tu","W","Th","F","Sa","Su"],en=["Su","M","Tu","W","Th","F","Sa"][new Date().getDay()],eo=(G||[]).reduce((e,t)=>e+(Number(null==t?void 0:t.goal)||0),0),ei=Math.max(0,24-eo),ed=Math.max(0,eo-24),[ec,eu]=(0,r.useState)("#8CA4AF"),[ex,em]=(0,r.useState)("Other"),[eh,eg]=(0,r.useState)([]);(0,r.useEffect)(()=>{eg(function(){try{let e=localStorage.getItem("friends:v1"),t=e?JSON.parse(e):[];return Array.isArray(t)?t:[]}catch(e){return[]}}())},[]),(0,r.useEffect)(()=>{z&&(eu("#8CA4AF"),em("Other"))},[z]);let eb=(G||[]).filter(e=>{let t=Number((null==e?void 0:e.goal)||0),a=Number((null==e?void 0:e.timeSpent)||0),s=Object.values((null==e?void 0:e.days)||{}).reduce((e,t)=>e+(Number(t)||0),0);return t>0||a>0||s>0}),[ep,ef]=(0,r.useState)(()=>{let e=new Date;return m(e>=F&&e<=M?e:F)});(0,r.useEffect)(()=>{let e=new Date;ef(m(e>=F&&e<=M?e:F))},[J,C]);let ev=(()=>{let e=new Date(A);return e.setHours(0,0,0,0),"".concat(e.getFullYear(),"-").concat(String(e.getMonth()+1).padStart(2,"0"),"-").concat(String(e.getDate()).padStart(2,"0"))})();function ey(e){let[t,a,s]=(e||"").split("-").map(Number);return new Date(t,(a||1)-1,s||1)}function eN(e){let t=new Date(e),a=String(t.getHours()).padStart(2,"0"),s=String(t.getMinutes()).padStart(2,"0");return"".concat(a,":").concat(s)}function ej(e,t){if(!e||!t)return new Date().toISOString();let[a,s,r]=e.split("-").map(Number),[l,n]=t.split(":").map(Number);return new Date(a,(s||1)-1,r||1,l||0,n||0,0,0).toISOString()}ey(ev).getDay();let[ew,eS]=(0,r.useState)(""),[eE,ek]=(0,r.useState)(""),[eC,eD]=(0,r.useState)(!1),[eA,eF]=(0,r.useState)(0),[eM,eT]=(0,r.useState)(0),eO={current:null};function eI(e){if(function(e){if(!e)return!1;let t=ey(e),a=new Date;return new Date(t.getFullYear(),t.getMonth(),t.getDate())>new Date(a.getFullYear(),a.getMonth(),a.getDate())}(ep))return void window.alert("This is a future date. You can&apos;t log time yet — plan a session in the Timeline below instead.");if(!C||!e)return;let t=["Su","M","Tu","W","Th","F","Sa"][ey(ep).getDay()],a=(G||[]).map(a=>{if(c(a.label)!==c(C.label))return a;let s=Array.isArray(a.days)?{...a.days}:{...a.days||{}},r=Math.max(0,Number(s[t]||0)+e);s[t]=r;let l=Object.values(s).reduce((e,t)=>e+(Number(t)||0),0);return{...a,days:s,timeSpent:l}});H(a),U(a)}(0,r.useEffect)(()=>{if(!C)return;let e=(G||[]).find(e=>c(e.label)===c(C.label))||C,t=Number((null==e?void 0:e.goal)||0),a=["Su","M","Tu","W","Th","F","Sa"][ey(ep).getDay()],s=Math.max(0,Math.round(3600*Number(Math.max(0,t-Number((null==e?void 0:e.days)&&e.days[a]||0))||0)));if(eF(s),eT(s),eD(!1),eO.current)try{clearInterval(eO.current)}catch(e){}},[C&&C.label||"",ep,JSON.stringify(G)]),(0,r.useEffect)(()=>{if(eC)return eO.current=setInterval(()=>{eT(e=>{let t=Math.max(0,e-1);if(0===t){eD(!1);try{clearInterval(eO.current)}catch(e){}}return t})},1e3),()=>{try{clearInterval(eO.current)}catch(e){}}},[eC]);let[eL,eW]=(0,r.useState)(""),[eJ,eB]=(0,r.useState)(!1),[eP,eR]=(0,r.useState)({date:"",start:"",end:""}),eY=(0,r.useRef)(null),eG=(0,r.useRef)(null),[eH,eU]=(0,r.useState)(!1),[ez,e_]=(0,r.useState)(null),[eK,eV]=(0,r.useState)({title:"",area:"",dateYMD:"",start:"",end:"",notes:""});if((0,r.useEffect)(()=>{if(!C)return;let e="focusNotes:".concat(J,":").concat(C.label);try{let t=localStorage.getItem(e);eW(t||"")}catch(e){eW("")}},[J,C]),C){var eq;let e=(G||[]).find(e=>c(e.label)===c(C.label))||C,r=(null==e?void 0:e.color)||"#8CA4AF",l=Number(null==e?void 0:e.goal)||0,h=["Su","M","Tu","W","Th","F","Sa"][ey(ep).getDay()],b=Number((null==e||null==(eq=e.days)?void 0:eq[h])||0),p=Math.min(l>0?b/l*100:0,100).toFixed(0),f=l>0?(b-l)/l*100:0,y=b>l?Math.min(f,100).toFixed(0):0,S=14/21,E=Math.abs(l-b),k="focusNotes:".concat(J,":").concat(e.label);new Date().getDay(),ey(ev).getDay();let T=["Su","M","Tu","W","Th","F","Sa"][ey(ep).getDay()],O=(()=>{try{let e=localStorage.getItem("hourglassEvents:v1")||localStorage.getItem("calendarEvents");return e?JSON.parse(e):[]}catch(e){return[]}})(),I=O.filter(t=>{let a=new Date(t.start),s=c(t.area)===c(e.label),r=new Date(A.getFullYear(),A.getMonth(),1),l=new Date(A.getFullYear(),A.getMonth()+1,0,23,59,59,999),n=a>=r&&a<=l;return t.area===e.label&&console.log("Event filtering debug:",{event:t.title,area:t.area,focusArea:e.label,evStart:a.toISOString(),evStartLocal:a.toLocaleString(),viewedMonthStart:r.toISOString(),viewedMonthEnd:l.toISOString(),rawDate:A.toISOString(),offset:w,matchesArea:s,matchesMonth:n,included:s&&n}),s&&n});return(0,s.jsxs)("div",{className:"min-h-screen bg-white text-black px-4 pb-24 font-sans flex flex-col",children:[(0,s.jsx)("div",{className:"w-full",children:(0,s.jsx)("button",{onClick:()=>D(null),className:"mb-4 mt-6 px-4 py-2 w-full rounded bg-gray-200 text-[#4E4034] font-medium shadow hover:bg-gray-300",children:"← Back to Dashboard"})}),(0,s.jsxs)("div",{className:"flex flex-col gap-6 w-full max-w-md mx-auto",children:[(0,s.jsx)("div",{className:"w-full flex flex-col gap-4",children:(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-md p-6",children:[(0,s.jsxs)("div",{className:"flex items-center gap-6 w-full",children:[(0,s.jsxs)("div",{className:"flex flex-col items-center w-28",children:[(0,s.jsx)("div",{className:"text-sm font-semibold text-[#4E4034] text-center mb-1",children:e.label}),(0,s.jsxs)("div",{className:"relative w-20 h-20",children:[(0,s.jsxs)("svg",{className:"w-full h-full",viewBox:"0 0 36 36",children:[(0,s.jsx)("path",{className:"text-gray-300",stroke:"currentColor",strokeWidth:"3",fill:"none",d:"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831"}),(0,s.jsx)("path",{stroke:u(r,.55),strokeWidth:"3",strokeDasharray:"".concat(p,", 100"),strokeLinecap:"round",fill:"none",transform:"rotate(-90 18 18)",d:"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831"}),y>0&&(0,s.jsx)("g",{transform:"scale(0.88) translate(2.2 2.2)",children:(0,s.jsx)("path",{stroke:r,strokeWidth:"2.2",strokeDasharray:"".concat(y,", 100"),strokeLinecap:"round",fill:"none",transform:"rotate(-90 18 18)",d:"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831"})})]}),(0,s.jsxs)("div",{className:"absolute inset-0 flex flex-col items-center justify-center text-xs font-bold text-[#4E4034] leading-tight",children:[(0,s.jsx)("div",{className:"text-sm",children:i(E)}),(0,s.jsx)("div",{className:"text-[10px] uppercase text-gray-500",children:Number(b||0)>Number(l||0)?"OVER":"LEFT"})]})]}),(0,s.jsxs)("div",{className:"text-xs text-gray-500 text-center mt-1",children:["Daily Goal = ",n(l),o(l)]})]}),(0,s.jsxs)("div",{className:"flex-1 flex flex-col w-full",children:[(0,s.jsxs)("div",{className:"flex items-center justify-center gap-2 mb-1",children:[(0,s.jsx)("button",{className:"px-2 text-lg ".concat(ey(ep)<=F?"opacity-30 cursor-not-allowed":""),onClick:()=>{let e=ey(ep),t=new Date(e);t.setDate(e.getDate()-1),t>=F&&ef(m(t))},disabled:ey(ep)<=F,"aria-label":"Previous day",type:"button",children:"‹"}),(0,s.jsx)("div",{className:"text-[#4E4034] text-sm font-medium",children:ey(ep).toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric"})}),(0,s.jsx)("button",{className:"px-2 text-lg ".concat(ey(ep)>=M?"opacity-30 cursor-not-allowed":""),onClick:()=>{let e=ey(ep),t=new Date(e);t.setDate(e.getDate()+1),t<=M&&ef(m(t))},disabled:ey(ep)>=M,"aria-label":"Next day",type:"button",children:"›"})]}),(0,s.jsx)("div",{className:"flex justify-between items-center gap-2 w-full py-2",children:["M","Tu","W","Th","F","Sa","Su"].map(t=>{var a,n;let o=null!=(n=null==(a=e.days)?void 0:a[t])?n:0,i=Number(l),d=i>0?Math.min(o/i,1):0;return(0,s.jsxs)("div",{className:"relative flex flex-col items-center w-6",children:[(0,s.jsxs)("div",{className:"relative w-5 h-20 flex flex-col items-center justify-end",children:[(0,s.jsxs)("div",{className:"absolute bottom-0 w-full h-full flex flex-col justify-end",children:[(0,s.jsx)("div",{className:"w-full h-6 rounded-t-sm border border-[#EAECEC] bg-[#DDE5ED]",style:{backgroundColor:i>0&&o>i?r:"#DDE5ED"}}),(0,s.jsx)("div",{className:"h-1"}),(0,s.jsx)("div",{className:"w-full h-14 rounded-b-sm border border-[#EAECEC] bg-[#DDE5ED]"})]}),(0,s.jsx)("div",{className:"absolute bottom-0 w-full rounded-b-sm",style:{height:"".concat(d*S*100,"%"),backgroundColor:u(r,.4)}})]}),(0,s.jsx)("div",{className:"text-xs text-[#4E4034] text-center mt-1",children:t}),t===T?(0,s.jsx)("div",{className:"text-[10px] text-[#BCA88F] leading-none mt-1",children:"★"}):(0,s.jsx)("div",{className:"h-[10px] mt-1"})]},t)})})]})]}),(0,s.jsxs)("div",{className:"w-full grid grid-cols-2 gap-3 mt-3",children:[(0,s.jsxs)("div",{className:"rounded-xl border border-gray-200 bg-white p-3 flex flex-col",children:[(0,s.jsx)("div",{className:"text-sm text-gray-500 mb-2",children:"Countdown"}),(0,s.jsx)("div",{className:"text-2xl font-mono tracking-wider text-[#4E4034]",children:x(eM)}),(0,s.jsxs)("div",{className:"text-[11px] text-gray-500 mt-1",children:["Starting from ",x(eA)," (time left today)"]}),(0,s.jsxs)("div",{className:"flex gap-2 mt-3",children:[eC?(0,s.jsx)("button",{onClick:()=>eD(!1),className:"h-9 px-3 text-sm rounded bg-gray-300 text-[#4E4034] font-medium",children:"Pause"}):(0,s.jsx)("button",{onClick:()=>eD(!0),className:"h-9 px-3 text-sm rounded bg-[#8CA4AF] text-white font-medium",children:"Start"}),(0,s.jsx)("button",{onClick:function(){eD(!1),eT(eA)},className:"h-9 px-3 text-sm rounded bg-gray-200 text-[#4E4034] font-medium disabled:opacity-50",disabled:eM===eA,children:"Reset"})]})]}),(0,s.jsxs)("div",{className:"rounded-xl border border-gray-200 bg-white p-3 flex flex-col",children:[(0,s.jsx)("div",{className:"text-sm text-gray-500 mb-2",children:"Log Time Completed"}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-[11px] text-gray-500 mb-1",children:"Hours"}),(0,s.jsx)("input",{type:"number",inputMode:"numeric",value:ew,onChange:e=>eS(e.target.value),className:"w-full border border-gray-300 rounded px-3 py-2 text-[#4E4034]",placeholder:"0",min:"0"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-[11px] text-gray-500 mb-1",children:"Minutes"}),(0,s.jsx)("input",{type:"number",inputMode:"numeric",value:eE,onChange:e=>ek(e.target.value),className:"w-full border border-gray-300 rounded px-3 py-2 text-[#4E4034]",placeholder:"0",min:"0"})]})]}),(0,s.jsxs)("div",{className:"mt-3 flex gap-2",children:[(0,s.jsx)("button",{onClick:function(){let e=Math.max(0,Number(ew||0))+Math.max(0,Number(eE||0))/60;e&&(eI(-e),eS(""),ek(""))},className:"h-9 px-3 text-sm rounded border border-red-400 text-red-600 font-medium",children:"Remove"}),(0,s.jsx)("button",{onClick:function(){let e=Math.max(0,Number(ew||0))+Math.max(0,Number(eE||0))/60;e&&(eI(e),eS(""),ek(""))},className:"h-9 px-3 text-sm rounded text-white font-medium border",style:{backgroundColor:u(r,.4),borderColor:r,borderWidth:"3px"},children:"Add"})]}),(0,s.jsx)("div",{className:"text-[11px] text-gray-500 mt-2",children:"Adjust your time log for today"})]})]}),(0,s.jsx)("div",{className:"rounded-2xl border-2 border-gray-200 bg-white p-3 mt-3",children:(()=>{var r,l;let n=(null==e?void 0:e.meta)&&e.meta.category||(null==(l=G.find(t=>c(t.label)===c(e.label)))||null==(r=l.meta)?void 0:r.category)||"Other";return(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-[#4E4034] font-semibold text-base mb-2",children:"AI Helper"}),(0,s.jsx)("div",{className:"text-[12px] text-gray-600 mb-2",children:"Ask this focus‑area‑specific AI for quick plans, next steps, or ways to work smarter. It uses your goals and this week's progress."}),(0,s.jsxs)("div",{className:"text-[12px] text-gray-600 mb-2",children:["Category: ",(0,s.jsx)("span",{className:"font-medium",children:n})]}),(0,s.jsxs)("div",{ref:N,className:"max-h-[300px] overflow-y-auto mb-3 space-y-3",children:[0===v.length?(0,s.jsx)("div",{className:"text-[11px] text-gray-500 text-center py-4",children:"Start a conversation to get tailored suggestions for this focus area."}):v.map((e,t)=>(0,s.jsx)("div",{className:"flex ".concat("user"===e.type?"justify-end":"justify-start"),children:(0,s.jsxs)("div",{className:"max-w-[80%] rounded-2xl px-3 py-2 text-sm ".concat("user"===e.type?"bg-[#8CA4AF] text-white":"error"===e.type?"bg-red-100 text-red-800 border border-red-200":"bg-gray-100 text-[#4E4034]"),children:[(0,s.jsx)("div",{className:"whitespace-pre-wrap",children:e.content}),(0,s.jsx)("div",{className:"text-xs mt-1 ".concat("user"===e.type?"text-blue-100":"text-gray-500"),children:e.timestamp.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})},t)),g&&(0,s.jsx)("div",{className:"flex justify-start",children:(0,s.jsx)("div",{className:"bg-gray-100 text-[#4E4034] rounded-2xl px-3 py-2 text-sm",children:(0,s.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,s.jsx)("span",{children:"Thinking"}),(0,s.jsxs)("div",{className:"flex space-x-1",children:[(0,s.jsx)("div",{className:"w-1 h-1 bg-gray-400 rounded-full animate-bounce"}),(0,s.jsx)("div",{className:"w-1 h-1 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),(0,s.jsx)("div",{className:"w-1 h-1 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})]})})})]}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("textarea",{className:"w-full min-h-[44px] max-h-[120px] rounded-lg border border-gray-300 px-3 py-2 pr-12 text-[#4E4034] bg-[#F7F6F3] shadow-inner text-sm focus:outline-none focus:ring-2 focus:ring-[#BCA88F] resize-none",placeholder:"Ask anything to make you more productive in this focus area...",value:t,onChange:e=>a(e.target.value),disabled:g,onKeyDown:t=>{(t.metaKey||t.ctrlKey)&&"Enter"===t.key&&!g&&(t.preventDefault(),j(e))},style:{minHeight:"44px"}}),(0,s.jsx)("button",{onClick:()=>j(e),className:"absolute right-2 top-1/2 transform -translate-y-1/2 h-[36px] w-[36px] rounded-lg bg-[#8CA4AF] text-white flex items-center justify-center disabled:opacity-60 hover:bg-[#7A8F9A] transition-colors border-2 border-[#8CA4AF] hover:border-[#7A8F9A]",disabled:g||!t.trim(),title:"Send message to AI",children:(0,s.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})})]})]})})()}),(()=>{let t=["M","Tu","W","Th","F","Sa","Su"],a=t.reduce((t,a)=>{var s;return t+Number((null==e||null==(s=e.days)?void 0:s[a])||0)},0),r=["Su","M","Tu","W","Th","F","Sa"][new Date().getDay()],n=R?Math.max(1,t.indexOf(r)+1):7,o=7*Number(l||0),i=o-a;return(0,s.jsxs)("div",{className:"rounded-2xl border-2 border-gray-200 bg-white p-3 mt-3",children:[(0,s.jsx)("div",{className:"text-sm text-gray-500 mb-2",children:"Data"}),(0,s.jsxs)("div",{className:"grid grid-cols-3 gap-3 text-[#4E4034]",children:[(0,s.jsxs)("div",{className:"rounded-xl border border-gray-200 bg-white px-3 py-2",children:[(0,s.jsx)("div",{className:"text-[11px] text-gray-500",children:"Total this week"}),(0,s.jsx)("div",{className:"font-semibold",children:d(a)})]}),(0,s.jsxs)("div",{className:"rounded-xl border border-gray-200 bg-white px-3 py-2",children:[(0,s.jsx)("div",{className:"text-[11px] text-gray-500",children:"Daily avg"}),(0,s.jsx)("div",{className:"font-semibold",children:d(a/n)})]}),(0,s.jsxs)("div",{className:"rounded-xl border border-gray-200 bg-white px-3 py-2",children:[(0,s.jsx)("div",{className:"text-[11px] text-gray-500",children:"Weekly goal"}),(0,s.jsx)("div",{className:"font-semibold",children:d(o)})]})]}),(0,s.jsx)("div",{className:"mt-2 text-[12px] text-gray-600",children:i>=0?(0,s.jsxs)(s.Fragment,{children:["Weekly: ",d(i)," LEFT"]}):(0,s.jsxs)(s.Fragment,{children:["Weekly: ",d(Math.abs(i))," OVER"]})})]})})(),(()=>{var t,a;let r=(e=>{switch(e.toLowerCase()){case"fitness":return[{title:"Hal Higdon Training Plans",url:"#",description:"Professional running training programs"},{title:"Strava Running Groups",url:"#",description:"Join local running communities"},{title:"YouTube: Jeff Nippard",url:"#",description:"Science-based fitness content"}];case"study":return[{title:"Khan Academy LSAT",url:"#",description:"Free LSAT prep materials"},{title:"7Sage",url:"#",description:"Comprehensive LSAT preparation"},{title:"Anki Deck Marketplace",url:"#",description:"Flashcard decks for any subject"}];case"business":return[{title:"Seth Godin Blog",url:"#",description:"Marketing and business insights"},{title:"Indie Hackers",url:"#",description:"Community for bootstrapped founders"},{title:"Y Combinator Startup School",url:"#",description:"Free startup course"}];case"coding":return[{title:"freeCodeCamp",url:"#",description:"Learn to code for free"},{title:"The Odin Project",url:"#",description:"Full-stack web development"},{title:"Frontend Masters",url:"#",description:"Advanced frontend courses"}];case"design":return[{title:"Figma Community",url:"#",description:"Design templates and resources"},{title:"Dribbble",url:"#",description:"Design inspiration and community"},{title:"Skillshare Design",url:"#",description:"Creative design courses"}];default:return[{title:"Productivity Blog",url:"#",description:"General productivity tips"},{title:"Time Management Guide",url:"#",description:"Effective time management strategies"},{title:"Goal Setting Resources",url:"#",description:"Tools for setting and achieving goals"}]}})((null==e?void 0:e.meta)&&e.meta.category||(null==(a=G.find(t=>c(t.label)===c(e.label)))||null==(t=a.meta)?void 0:t.category)||"Other");return(0,s.jsxs)("div",{className:"rounded-2xl border-2 border-gray-200 bg-white p-3 mt-3",children:[(0,s.jsx)("div",{className:"text-[#4E4034] font-semibold text-base mb-2",children:"Recommended for You"}),(0,s.jsx)("div",{className:"text-[12px] text-gray-600 mb-3",children:"Based on your focus area category"}),(0,s.jsx)("div",{className:"space-y-2",children:r.map((e,t)=>(0,s.jsxs)("a",{href:e.url,className:"block rounded-xl border border-gray-200 bg-white shadow-sm p-3 hover:shadow-md transition-shadow cursor-pointer",children:[(0,s.jsx)("div",{className:"font-semibold text-[#4E4034] text-sm mb-1",children:e.title}),(0,s.jsx)("div",{className:"text-[12px] text-[#6A5E53]",children:e.description})]},t))})]})})(),(0,s.jsxs)("div",{className:"rounded-2xl border-2 border-gray-200 bg-white p-3 mt-3",children:[(0,s.jsx)("div",{className:"text-[#4E4034] font-semibold text-base mb-2",children:(0,s.jsx)("span",{children:"Timeline - Future Planning"})}),(0,s.jsx)("div",{className:"text-[12px] text-gray-600 mb-3",children:"Showing all events this month. Go to the Calendar page to add and plan your upcoming sessions"}),eJ&&(0,s.jsx)("div",{className:"fixed inset-0 backdrop-blur-sm bg-white/30 flex items-center justify-center z-50",children:(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-5 w-[90%] max-w-md",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-[#4E4034]",children:"Plan Future Session"}),(0,s.jsx)("button",{onClick:()=>eB(!1),className:"text-sm text-gray-500",children:"Close"})]}),(0,s.jsx)("div",{className:"text-[12px] text-gray-600 mb-3",children:"Schedule upcoming time blocks for this focus area"}),(0,s.jsx)("label",{className:"block text-xs text-gray-600 mb-1",children:"Title"}),(0,s.jsx)("input",{value:eP.title||"",onChange:e=>eR(t=>({...t,title:e.target.value})),className:"w-full border border-gray-300 rounded px-3 py-2 mb-3 text-[#4E4034]",placeholder:"e.g., Product Development"}),(0,s.jsx)("label",{className:"block text-xs text-gray-600 mb-1",children:"Focus Area"}),(0,s.jsx)("select",{value:eP.area||e.label||"",onChange:e=>eR(t=>({...t,area:e.target.value})),className:"w-full border border-gray-300 rounded px-3 py-2 mb-1 text-[#4E4034]",children:(G||[]).map(e=>(0,s.jsx)("option",{value:e.label,children:e.label},e.label))}),(0,s.jsx)("div",{className:"text-[11px] text-gray-500 mb-3",children:"Event color follows the Focus Area"}),(0,s.jsx)("label",{className:"block text-xs text-gray-600 mb-1",children:"Date"}),(0,s.jsx)("input",{ref:eY,type:"date",value:eP.date||ep,onChange:e=>eR(t=>({...t,date:e.target.value})),className:"w-full border border-gray-300 rounded px-3 py-2 text-[#4E4034] mb-3"}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs text-gray-600 mb-1",children:"Start"}),(0,s.jsx)("input",{type:"time",value:eP.start||"09:00",onChange:e=>eR(t=>({...t,start:e.target.value})),className:"w-full border border-gray-300 rounded px-3 py-2 text-[#4E4034]"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs text-gray-600 mb-1",children:"End"}),(0,s.jsx)("input",{type:"time",value:eP.end||"10:00",onChange:e=>eR(t=>({...t,end:e.target.value})),className:"w-full border border-gray-300 rounded px-3 py-2 text-[#4E4034]"})]})]}),(0,s.jsx)("label",{className:"block text-xs text-gray-600 mb-1 mt-3",children:"Notes"}),(0,s.jsx)("textarea",{value:eP.notes||"",onChange:e=>eR(t=>({...t,notes:e.target.value})),className:"w-full min-h-[80px] border border-gray-300 rounded px-3 py-2 text-[#4E4034]",placeholder:"What will you do during this session?"}),(0,s.jsxs)("div",{className:"mt-4 flex justify-end gap-2",children:[(0,s.jsx)("button",{onClick:()=>eB(!1),className:"px-3 py-2 rounded bg-gray-200 text-[#4E4034]",children:"Cancel"}),(0,s.jsx)("button",{onClick:function(){if(!(null==eP?void 0:eP.date)||!(null==eP?void 0:eP.start)||!(null==eP?void 0:eP.end))return void eB(!1);let t=Date.now().toString(),[a,s,r]=eP.date.split("-").map(Number),[l,n]=eP.start.split(":").map(Number),[o,i]=eP.end.split(":").map(Number),d=new Date(a,s-1,r,l,n,0,0),c=new Date(a,s-1,r,o,i,0,0),u={id:t,title:eP.title||e.label,area:eP.area||e.label,start:d.toISOString(),end:c.toISOString(),allDay:!1,notes:eP.notes||""},x=[...O,u];try{console.log("Saving new event:",{newEvent:u,allEventsCount:O.length,updatedCount:x.length,startDate:d.toISOString(),endDate:c.toISOString(),startDateLocal:d.toLocaleString(),endDateLocal:c.toLocaleString(),inputDate:eP.date,inputStart:eP.start,inputEnd:eP.end}),localStorage.setItem("hourglassEvents:v1",JSON.stringify(x)),localStorage.setItem("calendarEvents",JSON.stringify(x)),setAllEvents(x),window.dispatchEvent(new Event("calendarEventsUpdated"));try{window.dispatchEvent(new StorageEvent("storage",{key:"calendarEvents",newValue:JSON.stringify(x),oldValue:JSON.stringify(O)}))}catch(e){console.warn("Failed to dispatch storage event:",e)}eR({date:"",start:"",end:""})}catch(e){console.warn("Failed to save event:",e)}eB(!1)},className:"px-3 py-2 rounded bg-[#BCA88F] text-white",children:"Add"})]})]})}),0===I.length?(0,s.jsx)("div",{className:"text-gray-400 text-sm",children:"No events this week."}):(0,s.jsx)("div",{className:"flex flex-col gap-2",children:I.map(t=>(0,s.jsxs)("div",{className:"rounded-lg p-2 flex justify-between items-center text-sm",style:{backgroundColor:u(r,.4),borderColor:r,borderWidth:"3px",borderStyle:"solid"},children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"font-semibold text-[#4E4034]",children:t.title||t.area}),(0,s.jsxs)("div",{className:"text-[#4E4034]/80",children:[new Date(t.start).toLocaleDateString(void 0,{weekday:"short",month:"short",day:"numeric"})," • ",new Date(t.start).toLocaleTimeString([],{hour:"numeric",minute:"2-digit"})," - ",new Date(t.end).toLocaleTimeString([],{hour:"numeric",minute:"2-digit"})]})]}),Y&&(0,s.jsx)("button",{onClick:()=>{let a=new Date(t.start),s=new Date(t.end);e_(t.id),eV({title:t.title||t.area||"",area:t.area||e.label||"",dateYMD:m(a),start:eN(a),end:eN(s),notes:t.notes||t.description||""}),eU(!0)},className:"text-blue-700 hover:underline",children:"Edit"})]},t.id))})]}),(0,s.jsxs)("div",{className:"rounded-2xl border-2 border-gray-200 bg-white p-3 mt-3",children:[(0,s.jsx)("div",{className:"text-[#4E4034] font-semibold text-base mb-2",children:"Notes"}),Y?(0,s.jsx)("textarea",{className:"w-full min-h-[76px] rounded border border-gray-300 px-3 py-2 text-[#4E4034] bg-[#F7F6F3] shadow-inner text-sm focus:outline-none focus:ring-2 focus:ring-[#BCA88F] mb-2",placeholder:"Add strategies, ideas, or action steps for this focus area…",value:eL,onChange:e=>(function(e){eW(e);try{localStorage.setItem(k,e)}catch(e){}})(e.target.value)}):(0,s.jsx)("div",{className:"text-gray-700 text-sm min-h-[76px] whitespace-pre-wrap px-1 py-1",children:eL||(0,s.jsx)("span",{className:"text-gray-400",children:"No notes for this week."})})]})]})}),eH&&(0,s.jsx)("div",{className:"fixed inset-0 backdrop-blur-sm bg-white/30 flex items-center justify-center z-50",children:(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-5 w-[90%] max-w-md",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-[#4E4034]",children:"Edit Event"}),(0,s.jsx)("button",{onClick:()=>eU(!1),className:"text-sm text-gray-500",children:"Close"})]}),(0,s.jsx)("label",{className:"block text-xs text-gray-600 mb-1",children:"Title"}),(0,s.jsx)("input",{value:eK.title,onChange:e=>eV(t=>({...t,title:e.target.value})),className:"w-full border border-gray-300 rounded px-3 py-2 mb-3 text-[#4E4034]"}),(0,s.jsx)("label",{className:"block text-xs text-gray-600 mb-1",children:"Focus Area"}),(0,s.jsx)("select",{value:eK.area,onChange:e=>eV(t=>({...t,area:e.target.value})),className:"w-full border border-gray-300 rounded px-3 py-2 mb-3 text-[#4E4034]",children:(G||[]).map(e=>(0,s.jsx)("option",{value:e.label,children:e.label},e.label))}),(0,s.jsx)("label",{className:"block text-xs text-gray-600 mb-1",children:"Date"}),(0,s.jsx)("input",{ref:eG,type:"date",value:eK.dateYMD,onChange:e=>eV(t=>({...t,dateYMD:e.target.value})),className:"w-full border border-gray-300 rounded px-3 py-2 mb-3 text-[#4E4034]"}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs text-gray-600 mb-1",children:"Start"}),(0,s.jsx)("input",{type:"time",value:eK.start,onChange:e=>eV(t=>({...t,start:e.target.value})),className:"w-full border border-gray-300 rounded px-3 py-2 text-[#4E4034]"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs text-gray-600 mb-1",children:"End"}),(0,s.jsx)("input",{type:"time",value:eK.end,onChange:e=>eV(t=>({...t,end:e.target.value})),className:"w-full border border-gray-300 rounded px-3 py-2 text-[#4E4034]"})]})]}),(0,s.jsx)("label",{className:"block text-xs text-gray-600 mb-1 mt-3",children:"Notes"}),(0,s.jsx)("textarea",{value:eK.notes,onChange:e=>eV(t=>({...t,notes:e.target.value})),className:"w-full min-h-[80px] border border-gray-300 rounded px-3 py-2 text-[#4E4034]"}),(0,s.jsxs)("div",{className:"mt-4 flex justify-between items-center",children:[(0,s.jsx)("button",{onClick:()=>{let e=localStorage.getItem("hourglassEvents:v1")||localStorage.getItem("calendarEvents"),t=(e?JSON.parse(e):[]).filter(e=>e.id!==ez);try{localStorage.setItem("hourglassEvents:v1",JSON.stringify(t)),localStorage.setItem("calendarEvents",JSON.stringify(t)),window.dispatchEvent(new Event("calendarEventsUpdated"))}catch(e){}eU(!1)},className:"px-3 py-2 rounded bg-red-500 text-white",children:"Delete"}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("button",{onClick:()=>eU(!1),className:"px-3 py-2 rounded bg-gray-200 text-[#4E4034]",children:"Cancel"}),(0,s.jsx)("button",{onClick:()=>{let e=localStorage.getItem("hourglassEvents:v1")||localStorage.getItem("calendarEvents"),t=e?JSON.parse(e):[],a=ej(eK.dateYMD,eK.start),s=ej(eK.dateYMD,eK.end),r=t.map(e=>e.id===ez?{...e,title:eK.title||eK.area||e.title||e.area,area:eK.area||e.area,start:a,end:s,notes:eK.notes||""}:e);try{localStorage.setItem("hourglassEvents:v1",JSON.stringify(r)),localStorage.setItem("calendarEvents",JSON.stringify(r)),window.dispatchEvent(new Event("calendarEventsUpdated"))}catch(e){}eU(!1)},className:"px-3 py-2 rounded bg-[#BCA88F] text-white",children:"Save"})]})]})]})})]})]})}return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"h-screen bg-gradient-to-br from-gray-50 to-gray-100 text-gray-900 px-4 pb-20 font-sans flex flex-col gap-6 overflow-hidden",children:[(0,s.jsxs)("header",{className:"w-full py-3 px-4 flex justify-between items-center",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("button",{className:"text-gray-700 text-xl px-3 ".concat(w<=-364?"opacity-30 cursor-not-allowed":"hover:text-gray-900"),"aria-label":"Previous Week",onClick:()=>{w<=-364||(S(e=>Math.max(-364,e-7)),k(!1))},disabled:w<=-364,children:"‹"}),(0,s.jsx)("div",{className:"text-gray-900 font-bold text-lg",children:O}),(0,s.jsx)("button",{className:"text-gray-700 text-xl px-3 ".concat(w>=7?"opacity-30 cursor-not-allowed":"hover:text-gray-900"),"aria-label":"Next Week",onClick:()=>{w>=7||(S(e=>Math.min(7,e+7)),k(!0))},disabled:w>=7,children:"›"})]}),(0,s.jsx)("div",{className:"ml-auto",children:(0,s.jsx)("button",{onClick:()=>e.push("/settings"),title:"Settings","aria-label":"Settings",className:"inline-flex items-center justify-center w-10 h-10 rounded-xl bg-gray-100 border border-gray-200 text-gray-600 hover:bg-gray-200 hover:text-gray-800 transition-colors duration-200",children:(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"w-5 h-5",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})})})]}),(0,s.jsxs)("section",{className:"bg-white rounded-2xl p-6 shadow-lg border border-gray-100",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,s.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"Friends (beta)"}),(0,s.jsx)("div",{className:"flex items-center gap-2",children:(0,s.jsx)("button",{onClick:0===eh.length?function(){let e=[{id:"f1",name:"Ava M.",categories:[{label:"LSAT",goal:2,days:{M:1.2,Tu:1,W:0,Th:0,F:0,Sa:0,Su:0}},{label:"Gym",goal:1,days:{M:.5,Tu:.5,W:0,Th:0,F:0,Sa:0,Su:0}}]},{id:"f2",name:"Noah R.",categories:[{label:"Design",goal:3,days:{M:2,Tu:.5,W:0,Th:0,F:0,Sa:0,Su:0}}]}];h(e),eg(e)}:function(){h([]),eg([])},className:"text-sm px-4 py-2 rounded-xl border transition-colors duration-200 ".concat(0===eh.length?"bg-blue-50 text-blue-700 border-blue-200 hover:bg-blue-100":"bg-red-50 text-red-700 border-red-200 hover:bg-red-100"),title:0===eh.length?"Add sample friends to preview the module":"Remove sample friends",type:"button",children:0===eh.length?"Add sample":"Remove samples"})})]}),0===eh.length?(0,s.jsxs)("div",{className:"rounded-xl border border-gray-200 bg-gray-50 text-gray-600 px-4 py-4 text-sm",children:["No friends yet. Tap ",(0,s.jsx)("span",{className:"font-semibold text-gray-700",children:"Add sample"})," to preview how this looks."]}):(0,s.jsx)("div",{className:"flex flex-col gap-3",children:eh.map(e=>{let t=function(e,t){new Date(t).setHours(0,0,0,0);let a=["M","Tu","W","Th","F","Sa","Su"],s=((null==e?void 0:e.categories)||[]).reduce((e,t)=>e+a.reduce((e,a)=>{var s;return e+Number((null==t||null==(s=t.days)?void 0:s[a])||0)},0),0),r=((null==e?void 0:e.categories)||[]).reduce((e,t)=>e+7*Number((null==t?void 0:t.goal)||0),0),l=r>0?Math.min(100,s/r*100):0;return{totalLogged:s,weeklyGoal:r,pct:Math.round(l)}}(e,F);return(0,s.jsxs)("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-gray-100 w-full flex flex-row items-center gap-4 hover:shadow-md transition-shadow duration-200",children:[(0,s.jsx)("div",{className:"flex items-center justify-center w-12 h-12 rounded-full bg-gradient-to-br from-blue-100 to-blue-200 text-blue-700 font-bold text-sm",children:String(e.name||"?").split(" ").map(e=>e[0]).join("").slice(0,2).toUpperCase()}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("div",{className:"text-base font-semibold text-gray-900",children:e.name}),(0,s.jsxs)("div",{className:"text-sm text-gray-600",children:["This week: ",d(t.totalLogged)," / ",d(t.weeklyGoal)]})]}),(0,s.jsxs)("div",{className:"relative w-14 h-14",children:[(0,s.jsxs)("svg",{className:"w-full h-full",viewBox:"0 0 36 36","aria-hidden":"true",children:[(0,s.jsx)("path",{stroke:"#E5E7EB",strokeWidth:"3",fill:"none",d:"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831"}),(0,s.jsx)("path",{stroke:"#3B82F6",strokeWidth:"3",strokeDasharray:"".concat(t.pct,", 100"),strokeLinecap:"round",fill:"none",transform:"rotate(-90 18 18)",d:"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831"})]}),(0,s.jsxs)("div",{className:"absolute inset-0 flex items-center justify-center text-xs font-bold text-gray-900",children:[t.pct,"%"]})]})]},e.id)})})]}),(0,s.jsxs)("div",{className:"bg-white rounded-2xl p-6 shadow-lg border border-gray-100",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,s.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"Focus Areas"}),(0,s.jsxs)("div",{className:"text-sm whitespace-nowrap ".concat(eo>24?"text-red-600":"text-gray-600"),children:[(0,s.jsx)("span",{className:"font-semibold",children:n(eo)})," out of 24 hours planned today"]})]}),ed>0&&(0,s.jsxs)("div",{className:"rounded-xl border border-red-200 bg-red-50 text-red-700 text-sm px-4 py-3 mb-4",children:["Your focus area daily goals add up to ",n(eo),"hrs (over by ",n(ed),"hrs). Please reduce one or more daily goals so the total is 24hrs or less."]}),(0,s.jsxs)("div",{className:"flex flex-col gap-3",children:[[...eb].reverse().map((e,t)=>{var a;let{label:r,timeSpent:l,goal:d,days:c,color:x}=e,h=Number(null!=d?d:0),g=Number(null!=(a=null==c?void 0:c[en])?a:0),b=Math.min(h>0?g/h*100:0,100).toFixed(0),p=h>0?(g-h)/h*100:0,f=g>h?Math.min(p,100).toFixed(0):0,v={color:x},y=(null==v?void 0:v.color)||"#8CA4AF";ey(ev).getDay();let N=14/21,j=Math.abs((h||0)-(g||0));return(0,s.jsxs)("div",{onClick:()=>{D({label:r,timeSpent:l,goal:d,days:c,color:x});let e=new Date;ef(m(e>=F&&e<=M?e:F))},className:"bg-white p-4 rounded-xl shadow-sm border border-gray-100 w-full flex flex-row items-center gap-4 relative cursor-pointer hover:shadow-md transition-shadow duration-200",children:[Y&&(0,s.jsx)("button",{type:"button",className:"absolute -top-1 right-2 text-[#4E4034] text-xl px-2","aria-label":"Delete or Rename",onClick:e=>{e.stopPropagation(),ea(r),er(r)},children:"⋯"}),(0,s.jsxs)("div",{className:"flex flex-row items-center gap-5 w-full",children:[(0,s.jsxs)("div",{className:"flex flex-col items-center w-28",children:[(0,s.jsx)("div",{className:"".concat(r.length>12?"text-xs":"text-sm"," font-bold text-gray-900 text-center"),children:r}),(0,s.jsxs)("div",{className:"relative w-20 h-20",children:[(0,s.jsxs)("svg",{className:"w-full h-full",viewBox:"0 0 36 36",children:[(0,s.jsx)("path",{className:"text-gray-300",stroke:"currentColor",strokeWidth:"3",fill:"none",d:"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831"}),(0,s.jsx)("path",{stroke:u(y,.55),strokeWidth:"3",strokeDasharray:"".concat(b,", 100"),strokeLinecap:"round",fill:"none",transform:"rotate(-90 18 18)",d:"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831"}),f>0&&(0,s.jsx)("g",{transform:"scale(0.88) translate(2.2 2.2)",children:(0,s.jsx)("path",{stroke:y,strokeWidth:"2.2",strokeDasharray:"".concat(f,", 100"),strokeLinecap:"round",fill:"none",transform:"rotate(-90 18 18)",d:"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831"})})]}),(0,s.jsxs)("div",{className:"absolute inset-0 flex flex-col items-center justify-center text-xs font-bold text-gray-900 leading-tight",children:[(0,s.jsx)("div",{className:"text-sm",children:i(j)}),(0,s.jsx)("div",{className:"text-[10px] uppercase text-gray-600",children:Number(g||0)>Number(h||0)?"OVER":"LEFT"})]})]}),(0,s.jsxs)("div",{className:"text-xs text-gray-600 text-center font-medium",children:["Daily Goal = ",n(null!=d?d:0),o(null!=d?d:0)]})]}),(0,s.jsx)("div",{className:"flex justify-center items-center gap-4 w-full py-3",children:el.map(e=>{var t;let a=null!=(t=null==c?void 0:c[e])?t:0,r=Number(null!=d?d:0),l=r>0?Math.min(a/r,1):0;return(0,s.jsxs)("div",{className:"relative flex flex-col items-center",children:[(0,s.jsxs)("div",{className:"relative w-5 h-20 flex flex-col items-center justify-end",children:[(0,s.jsxs)("div",{className:"absolute bottom-0 w-full h-full flex flex-col justify-end",children:[(0,s.jsx)("div",{className:"w-full h-6 rounded-t-sm border border-[#EAECEC] bg-[#DDE5ED]",style:{backgroundColor:r>0&&a>r?y:"#DDE5ED"}}),(0,s.jsx)("div",{className:"h-1"}),(0,s.jsx)("div",{className:"w-full h-14 rounded-b-sm border border-[#EAECEC] bg-[#DDE5ED]"})]}),(0,s.jsx)("div",{className:"absolute bottom-0 w-full rounded-b-sm",style:{height:"".concat(l*N*100,"%"),backgroundColor:u(y,.4)}})]}),(0,s.jsx)("div",{className:"text-xs text-[#4E4034] text-center mt-1",children:e}),R&&e===en?(0,s.jsx)("div",{className:"text-[10px] text-[#BCA88F] leading-none mt-1",children:"★"}):(0,s.jsx)("div",{className:"h-[10px] mt-1"})]},e)})})]})]},r)}),0===eb.length?Y?(0,s.jsxs)(s.Fragment,{children:[E&&(0,s.jsx)("div",{className:"mb-2","aria-hidden":"true",role:"presentation",children:(0,s.jsx)("div",{className:"w-full rounded-xl bg-[#8CA4AF] text-white py-3 text-center font-medium shadow-sm select-none",children:"Plan next week's Focus Areas"})}),(0,s.jsxs)("div",{onClick:()=>{X(""),_(!0)},className:"relative bg-gray-100 p-3 rounded-xl shadow-md w-full flex flex-row items-center gap-3 opacity-50 cursor-pointer",children:[(0,s.jsxs)("div",{className:"flex flex-col items-center w-28",children:[(0,s.jsx)("div",{className:"text-sm font-semibold text-[#4E4034] text-center",children:"Add a Focus Area"}),(0,s.jsxs)("div",{className:"relative w-20 h-20",children:[(0,s.jsx)("svg",{className:"w-full h-full",viewBox:"0 0 36 36",children:(0,s.jsx)("path",{className:"text-gray-300",stroke:"currentColor",strokeWidth:"3",fill:"none",d:"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831"})}),(0,s.jsx)("div",{className:"absolute inset-0 flex items-center justify-center text-xs font-bold text-[#4E4034]",children:"0hrs left"})]}),(0,s.jsx)("div",{className:"text-xs text-gray-500 text-center",children:"Daily Goal = 0hrs"})]}),(0,s.jsx)("button",{className:"absolute -top-1 right-2 text-[#4E4034] text-xl px-2","aria-label":"Focus Area Options",tabIndex:-1,style:{pointerEvents:"none",opacity:1},children:"⋯"}),(0,s.jsx)("div",{className:"flex justify-between items-end flex-1 mt-2 w-full px-2 py-2",children:["M","Tu","W","Th","F","Sa","Su"].map(e=>(0,s.jsxs)("div",{className:"relative flex flex-col items-center",children:[(0,s.jsxs)("div",{className:"relative w-5 h-20 flex flex-col items-center justify-end",children:[(0,s.jsx)("div",{className:"w-full h-6 rounded-t-sm border border-[#EAECEC] bg-[#DDE5ED]"}),(0,s.jsx)("div",{className:"h-1"}),(0,s.jsx)("div",{className:"w-full h-14 rounded-b-sm border border-[#EAECEC] bg-[#DDE5ED]"})]}),(0,s.jsx)("div",{className:"text-xs text-[#4E4034] text-center mt-1",children:e}),R&&e===en?(0,s.jsx)("div",{className:"text-[10px] text-[#BCA88F] leading-none mt-1",children:"★"}):(0,s.jsx)("div",{className:"h-[10px] mt-1"})]},e))})]})]}):(0,s.jsx)("div",{className:"mt-2 w-full rounded-xl border border-gray-200 bg-gray-50 text-[#4E4034]/70 py-6 text-center",children:"No logged focus areas."}):Y?(0,s.jsx)(s.Fragment,{children:(0,s.jsx)("button",{onClick:()=>{if(X(""),eo>=24){X("Your focus area daily goals already total ".concat(n(eo),"hrs. Please adjust existing goals so the sum is 24hrs or less before adding another.")),_(!0);return}_(!0)},type:"button",className:"mt-4 w-full rounded-xl bg-[#8CA4AF] text-white py-3 font-semibold shadow-lg hover:bg-[#7A8F9A] active:bg-[#6B7A85] transition-all duration-200","aria-label":"+ Add another Focus Area",children:"+ Add another Focus Area"})}):null]})]})]}),(0,s.jsx)("div",{className:"fixed bottom-0 left-0 right-0 p-3 pb-7 z-50",children:(0,s.jsxs)("div",{className:"max-w-md mx-auto grid grid-cols-3 gap-3",children:[(0,s.jsx)("button",{"aria-current":"page",disabled:!0,className:"h-12 w-full rounded-2xl bg-gray-900 text-white font-semibold shadow-lg",children:"Dashboard"}),(0,s.jsx)("button",{onClick:()=>e.push("/calendar"),className:"h-12 w-full rounded-2xl bg-white text-gray-700 font-medium border-2 border-gray-200 hover:bg-gray-50 transition-colors duration-200 shadow-sm",children:"Calendar"}),(0,s.jsx)("button",{onClick:()=>e.push("/connect"),className:"h-12 w-full rounded-2xl bg-white text-gray-700 font-medium border-2 border-gray-200 hover:bg-gray-50 transition-colors duration-200 shadow-sm",children:"Connect"})]})}),z&&(0,s.jsx)("div",{className:"fixed inset-0 backdrop-blur-sm bg-white/30 flex items-center justify-center z-50",children:(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6 w-[90%] max-w-md",children:[(0,s.jsx)("h2",{className:"text-lg font-bold mb-4 text-black",children:"Add a New Focus Area"}),(0,s.jsx)("input",{type:"text",placeholder:"Name",value:K,onChange:e=>V(e.target.value),className:"w-full border border-gray-300 rounded px-3 py-2 mb-3 text-black"}),(0,s.jsxs)("div",{className:"mb-2",children:[(0,s.jsx)("input",{type:"number",placeholder:"Daily Goal (hours)",value:q,onChange:e=>$(e.target.value),className:"w-full border border-gray-300 rounded px-3 py-2 text-black",min:0,step:.25,max:Math.max(0,ei)}),(0,s.jsxs)("div",{className:"mt-1 text-xs text-gray-500",children:[n(ei),"hrs available today (out of 24)"]})]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("div",{className:"text-sm text-black mb-2",children:"Color"}),(0,s.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[["#8CA4AF","#BCA88F","#9ACD32","#E46C6C","#7D7ACF","#F2C94C","#56CCF2"].map(e=>(0,s.jsx)("button",{type:"button",onClick:()=>eu(e),className:"w-7 h-7 rounded-full border",style:{backgroundColor:e,outline:ec===e?"2px solid #4E4034":"none"},"aria-label":"Choose color ".concat(e)},e)),(0,s.jsxs)("label",{className:"ml-1 text-sm text-black flex items-center gap-2",children:["Custom:",(0,s.jsx)("input",{type:"color",value:ec,onChange:e=>eu(e.target.value),className:"w-8 h-8 p-0 border rounded","aria-label":"Custom color"})]})]})]}),(0,s.jsxs)("div",{className:"mb-4 mt-2",children:[(0,s.jsx)("div",{className:"text-sm text-black mb-2",children:"Category"}),(0,s.jsx)("select",{value:ex,onChange:e=>em(e.target.value),className:"w-full border border-gray-300 rounded px-3 py-2 text-black",children:["Study","Fitness","Career","Creative","Finance","Health","Language","Other"].map(e=>(0,s.jsx)("option",{value:e,children:e},e))})]}),Q?(0,s.jsx)("div",{className:"mb-3 text-sm text-red-600",role:"alert",children:Q}):null,(0,s.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,s.jsx)("button",{onClick:()=>{X(""),_(!1),em("Other")},className:"px-4 py-2 bg-gray-300 rounded",children:"Cancel"}),(0,s.jsx)("button",{onClick:()=>{let e=parseFloat(q);if(!K||isNaN(e)||e<=0)return void X("Please enter a name and a goal greater than 0.");if(eo+e>24)return void X("This would put you over 24hrs today. You have ".concat(n(ei),"hrs available."));let t=[...G,{label:K,timeSpent:0,goal:e,days:[],color:ec,meta:{category:ex}}];H(t),U(t),_(!1),V(""),$(""),X(""),em("Other")},className:"px-4 py-2 bg-[#BCA88F] text-white rounded",children:"Add"})]})]})}),et&&(0,s.jsx)("div",{className:"fixed inset-0 backdrop-blur-sm bg-white/30 flex items-center justify-center z-50",children:(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6 w-[90%] max-w-md",children:[(0,s.jsx)("h2",{className:"text-lg font-bold mb-4 text-black",children:"Rename Focus Area"}),(0,s.jsx)("p",{className:"text-sm text-gray-600 mb-3",children:"Changing the name will update it everywhere, including today's dashboard, your calendar events, and saved notes."}),(0,s.jsx)("input",{type:"text",value:es,onChange:e=>er(e.target.value),className:"w-full border border-gray-300 rounded px-3 py-2 mb-4 text-black",placeholder:"New name"}),(0,s.jsxs)("div",{className:"flex justify-between items-center gap-3",children:[(0,s.jsx)("button",{onClick:()=>{ea(null),er("")},className:"px-4 py-2 bg-gray-300 rounded",children:"Cancel"}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("button",{onClick:()=>{ee(et),ea(null)},className:"px-3 py-2 border border-red-400 text-red-600 rounded",children:"Delete"}),(0,s.jsx)("button",{onClick:()=>{let e=(es||"").trim();if(!e)return;let t=(G||[]).some(t=>c(t.label)===c(e));if(c(et)!==c(e)&&t)return void alert("Another focus area already uses that name.");let a=(G||[]).map(t=>t.label===et?{...t,label:e}:t);H(a),U(a),function(e,t){for(let a of["focusCategories",L+W,L+J,L+I(new Date(Date.now()+6048e5))])try{let s=localStorage.getItem(a);if(!s)continue;let r=JSON.parse(s)||[],l=Array.isArray(r)?r.map(a=>c(a.label)===c(e)?{...a,label:t}:a):r;localStorage.setItem(a,JSON.stringify(l))}catch(e){}try{let a="focusNotes:".concat(e),s="focusNotes:".concat(t),r=localStorage.getItem(a);r&&!localStorage.getItem(s)&&localStorage.setItem(s,r),r&&localStorage.removeItem(a)}catch(e){}for(let a of["hourglassEvents:v1","calendarEvents","calendar-items","events"])try{let s=localStorage.getItem(a);if(!s)continue;let r=JSON.parse(s);if(!Array.isArray(r))continue;let l=r.map(a=>{let s=a.area||a.focusArea||a.category||a.label||"";if(c(s)===c(e)){let e={...a};return"area"in e&&(e.area=t),"focusArea"in e&&(e.focusArea=t),"category"in e&&(e.category=t),e}return a});localStorage.setItem(a,JSON.stringify(l))}catch(e){}try{window.dispatchEvent(new Event("focusCategoriesUpdated"))}catch(e){}try{window.dispatchEvent(new Event("calendarEventsUpdated"))}catch(e){}}(et,e),ea(null),er("")},className:"px-4 py-2 bg-[#BCA88F] text-white rounded",children:"Save"})]})]})]})}),Z&&(0,s.jsx)("div",{className:"fixed inset-0 backdrop-blur-sm bg-white/30 flex items-center justify-center z-50",children:(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6 w-[90%] max-w-md",children:[(0,s.jsx)("h2",{className:"text-lg font-bold mb-4 text-black",children:"Delete Focus Area"}),(0,s.jsxs)("p",{className:"mb-6 text-black",children:["Are you sure you want to delete ",(0,s.jsx)("strong",{children:Z}),"?"]}),(0,s.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,s.jsx)("button",{onClick:()=>ee(null),className:"px-4 py-2 bg-gray-300 rounded",children:"Cancel"}),(0,s.jsx)("button",{onClick:()=>{let e=G.filter(e=>e.label!==Z);H(e),U(e);let t=e=>(e||"").toString().trim().toLowerCase();for(let e of["hourglassEvents:v1","calendarEvents","calendar-items","events"])try{let a=localStorage.getItem(e);if(!a)continue;let s=JSON.parse(a);if(!Array.isArray(s))continue;let r=s.filter(e=>{let a=e.area||e.focusArea||e.category||e.label||"";return t(a)!==t(Z)});localStorage.setItem(e,JSON.stringify(r))}catch(e){}try{window.dispatchEvent(new Event("calendarEventsUpdated"))}catch(e){}ee(null)},className:"px-4 py-2 bg-red-500 text-white rounded",children:"Delete"})]})]})})]})}},347:()=>{},5695:(e,t,a)=>{"use strict";var s=a(8999);a.o(s,"useRouter")&&a.d(t,{useRouter:function(){return s.useRouter}}),a.o(s,"useSearchParams")&&a.d(t,{useSearchParams:function(){return s.useSearchParams}})},6779:(e,t,a)=>{Promise.resolve().then(a.bind(a,296))}},e=>{e.O(0,[690,441,964,358],()=>e(e.s=6779)),_N_E=e.O()}]);