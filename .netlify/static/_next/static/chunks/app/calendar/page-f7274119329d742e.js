(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[329],{6115:function(e,t,r){Promise.resolve().then(r.bind(r,8001))},9376:function(e,t,r){"use strict";var a=r(5475);r.o(a,"useRouter")&&r.d(t,{useRouter:function(){return a.useRouter}}),r.o(a,"useSearchParams")&&r.d(t,{useSearchParams:function(){return a.useSearchParams}})},8001:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return S}});var a=r(7437),n=r(2265),s=r(9376);let l=()=>{let[e,t]=(0,n.useState)(!1);return(0,n.useEffect)(()=>t(!0),[]),e},o=()=>{let[e,t]=(0,n.useState)({top:0,right:0,bottom:0,left:0}),r=l();return(0,n.useEffect)(()=>{if(r&&(/iPad|iPhone|iPod/.test(navigator.userAgent)||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1)){let e=getComputedStyle(document.documentElement),r=parseInt(e.getPropertyValue("env(safe-area-inset-top)")||"0",10);t({top:r,right:parseInt(e.getPropertyValue("env(safe-area-inset-right)")||"0",10),bottom:parseInt(e.getPropertyValue("env(safe-area-inset-bottom)")||"0",10),left:parseInt(e.getPropertyValue("env(safe-area-inset-left)")||"0",10)})}},[r]),e},i=Array.from({length:24},(e,t)=>t),c=["Su","M","Tu","W","Th","F","Sa"];function d(){try{if("undefined"!=typeof crypto&&"function"==typeof crypto.randomUUID)return crypto.randomUUID();if("undefined"!=typeof crypto&&"function"==typeof crypto.getRandomValues){let e=new Uint8Array(16);crypto.getRandomValues(e),e[6]=15&e[6]|64,e[8]=63&e[8]|128;let t=Array.from(e,e=>e.toString(16).padStart(2,"0")).join("");return"".concat(t.slice(0,8),"-").concat(t.slice(8,12),"-").concat(t.slice(12,16),"-").concat(t.slice(16,20),"-").concat(t.slice(20))}}catch(e){}return"evt-".concat(Date.now().toString(36),"-").concat(Math.random().toString(36).slice(2,8))}let u={title:"",area:"",dateYMD:"",start:"09:00",end:"10:00",notes:""};function m(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,t=new Date(e),r=t.getMinutes(),a=t.getHours();if(r>0&&23===(a+=1))return{start:"00:00",end:"01:00"};if(a>=24)return{start:"23:00",end:"23:59"};let n=Math.min(23,a+1),s=e=>String(e).padStart(2,"0");return{start:"".concat(s(a),":00"),end:"".concat(s(n),":00")}}function h(e){let t=new Date(e),r=String(t.getHours()).padStart(2,"0"),a=String(t.getMinutes()).padStart(2,"0");return"".concat(r,":").concat(a)}function g(e){if(!e||"string"!=typeof e)return 0;let[t,r]=e.split(":").map(Number);return(60*(Number.isFinite(t)?t:0)+(Number.isFinite(r)?r:0))*6e4}function x(e,t){let r=Math.min(Math.max(Math.floor((g(e)+(t||0))/6e4),0),1439);return"".concat(String(Math.floor(r/60)).padStart(2,"0"),":").concat(String(r%60).padStart(2,"0"))}function f(e){if(!e)return new Date;let[t,r,a]=e.split("-").map(Number);return new Date(t,(r||1)-1,a||1)}function p(e){let t=new Date(e),r=t.getFullYear(),a=String(t.getMonth()+1).padStart(2,"0"),n=String(t.getDate()).padStart(2,"0");return"".concat(r,"-").concat(a,"-").concat(n)}function v(e){try{let t="focusCategories:week:".concat(p(function(e){let t=new Date(e);t.setHours(0,0,0,0);let r=t.getDay();return t.setDate(t.getDate()-(r+6)%7),t}(e))),r=localStorage.getItem(t);if(r){let e=JSON.parse(r);if(Array.isArray(e))return e}}catch(e){}return function(){try{let e=localStorage.getItem("focusCategories"),t=e?JSON.parse(e):[];return Array.isArray(t)?t:[]}catch(e){return[]}}()}function y(e){return f(e).toLocaleDateString("en-US",{weekday:"short",month:"long",day:"numeric"})}function b(e){let t=new Date(e);return t.setDate(1),t.setHours(0,0,0,0),t}function w(e,t){let r=new Date(e);return r.setMonth(r.getMonth()+t),r}function j(e,t){return e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()&&e.getDate()===t.getDate()}function N(e){let{valueYMD:t,onChange:r,onClose:s}=e,l=t?f(t):new Date,[o,i]=(0,n.useState)(b(l)),c=function(e){let t=b(e),r=new Date(t);r.setDate(1-t.getDay());let a=[];for(let e=0;e<42;e++){let t=new Date(r);t.setDate(r.getDate()+e),a.push(t)}return a}(o),d=new Date;d.setHours(0,0,0,0);let u=f(t||p(new Date));return(0,a.jsxs)("div",{className:"absolute z-50 mt-1 w-72 rounded-lg border border-gray-200 bg-white shadow-lg p-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between px-1 pb-2",children:[(0,a.jsx)("button",{className:"px-2 py-1 rounded hover:bg-gray-100",onClick:()=>i(w(o,-1)),"aria-label":"Previous month",children:"‹"}),(0,a.jsx)("div",{className:"font-semibold text-[#374151]",children:o.toLocaleDateString("en-US",{month:"long",year:"numeric"})}),(0,a.jsx)("button",{className:"px-2 py-1 rounded hover:bg-gray-100",onClick:()=>i(w(o,1)),"aria-label":"Next month",children:"›"})]}),(0,a.jsx)("div",{className:"grid grid-cols-7 text-center text-[11px] text-gray-500",children:["Su","Mo","Tu","We","Th","Fr","Sa"].map(e=>(0,a.jsx)("div",{className:"py-1",children:e},e))}),(0,a.jsx)("div",{className:"grid grid-cols-7 gap-1",children:c.map((e,n)=>{let l=e.getMonth()===o.getMonth(),i=t&&j(e,u),c=j(e,d);return(0,a.jsx)("button",{onClick:()=>{r&&r(p(e)),s&&s()},className:"h-9 rounded-md text-sm ".concat(l?"text-[#374151]":"text-gray-400"," ").concat(i?"bg-[#6B7280] text-white":"hover:bg-gray-100"," ").concat(c&&!i?"ring-1 ring-[#6B7280]":""),title:e.toDateString(),children:e.getDate()},n)})})]})}function D(){let e=(0,s.useRouter)(),t=(0,s.useSearchParams)(),r=l(),b=o(),w=(0,n.useMemo)(()=>{let e=new Date;return e.setHours(0,0,0,0),e},[]),[j,D]=(0,n.useState)(null);(0,n.useEffect)(()=>{let e=new Date;e.setHours(0,0,0,0),D(e)},[]);let[S,M]=(0,n.useState)([]);(0,n.useEffect)(()=>{M(v(new Date))},[]),(0,n.useEffect)(()=>{let e=e=>{e.key&&(e.key.startsWith("focusCategories")||"focusCategories"===e.key)&&j&&M(v(j))};return window.addEventListener("storage",e),()=>window.removeEventListener("storage",e)},[j]);let[E,k]=(0,n.useState)(!1),[C,Y]=(0,n.useState)(!1),[L,T]=(0,n.useState)(()=>({...u,...m(new Date),dateYMD:p(new Date)}));(0,n.useEffect)(()=>{if((E||C)&&j){let e=v(j);M(e),T(t=>(null==t?void 0:t.area)?(e||[]).some(e=>e.label===t.area)?t:{...t,area:""}:t)}},[E,C,j]);let F=e=>{let t=(S||[]).find(t=>t.label===e);return(null==t?void 0:t.color)||"#E9E5F9"},A=(0,n.useMemo)(()=>["hourglassEvents:v1","calendarEvents","calendar-items","events"],[]),[R,P]=(0,n.useState)([]),[W,I]=(0,n.useState)(!1);(0,n.useEffect)(()=>{try{console.log("Calendar: Loading events on mount...");let e=[],t=new Set;for(let r of A){let a=localStorage.getItem(r);if(console.log('Calendar: Checking localStorage key "'.concat(r,'":'),a?"has data":"empty"),a)try{let n=JSON.parse(a)||[];if(Array.isArray(n))for(let a of(console.log("Calendar: Found ".concat(n.length," events in ").concat(r,":"),n),n)){let r=a&&(a.id||"".concat(a.title||"","-").concat(a.start||""));r&&!t.has(r)&&(t.add(r),e.push(a))}}catch(e){console.warn("Calendar: Failed to parse ".concat(r,":"),e)}}console.log("Calendar: Total collected events:",e.length,e),e.length&&P(e)}catch(e){console.warn("Failed to read events from storage",e)}finally{I(!0)}},[A]),(0,n.useEffect)(()=>{if(W)try{let e=JSON.stringify(R);localStorage.setItem("hourglassEvents:v1",e),localStorage.setItem("calendarEvents",e)}catch(e){console.warn("Failed to write events to storage",e)}},[R,W]),(0,n.useEffect)(()=>{let e=e=>{if(e.key&&A.includes(e.key))try{console.log("Calendar: Storage event detected:",e.key,e.newValue);let t=e.newValue?JSON.parse(e.newValue):null;Array.isArray(t)&&(console.log("Calendar: Updating events from storage event:",t),P(t))}catch(e){console.warn("Calendar: Failed to parse storage event:",e)}};return window.addEventListener("storage",e),()=>window.removeEventListener("storage",e)},[A]),(0,n.useEffect)(()=>{let e=()=>{try{console.log("Calendar: Received calendarEventsUpdated event, refreshing events...");let e=[],t=new Set;for(let r of A){let a=localStorage.getItem(r);if(a)try{console.log("Calendar: Reading from key:",r);let n=JSON.parse(a)||[];if(Array.isArray(n))for(let r of n){let a=r&&(r.id||"".concat(r.title||"","-").concat(r.start||""));a&&!t.has(a)&&(t.add(a),e.push(r))}}catch(e){}}console.log("Calendar: Updating events from localStorage:",{collectedCount:e.length,events:e}),P(e)}catch(e){console.warn("Failed to read events from storage on calendarEventsUpdated",e)}};return window.addEventListener("calendarEventsUpdated",e),()=>window.removeEventListener("calendarEventsUpdated",e)},[A]),(0,n.useEffect)(()=>{M(v(j)),T(e=>(null==e?void 0:e.area)?(v(j)||[]).some(t=>t.label===e.area)?e:{...e,area:""}:e)},[j]),(0,n.useEffect)(()=>{if(!t)return;let r=t.get("new");if("1"!==r&&"true"!==r)return;let a=t.get("date"),n=t.get("focus");if(a)try{D(f(a))}catch(e){}T(e=>({...u,...m(new Date),area:n?decodeURIComponent(n):e.area,dateYMD:a||p(j)})),k(!0);try{e.replace("/calendar",{scroll:!1})}catch(e){}},[t,e,j]);let O=(0,n.useMemo)(()=>j?j.toLocaleDateString("en-US",{weekday:"short",month:"long",day:"numeric"}):"Loading...",[j]),z=(0,n.useRef)(null),U=(0,n.useRef)([]),H=(0,n.useRef)(null),q=(0,n.useRef)(null),V=(0,n.useRef)(null),B=(0,n.useMemo)(()=>{let e=new Date(w);return e.setDate(e.getDate()-14),Array.from({length:29},(t,r)=>{let a=new Date(e);return a.setDate(e.getDate()+r),a})},[w]);(0,n.useEffect)(()=>{var e;if(!z.current||!(null===(e=U.current)||void 0===e?void 0:e.length)||!j)return;let t=B.findIndex(e=>e.toDateString()===j.toDateString());if(-1===t)return;let r=U.current[Math.max(0,t-1)];if(!r)return;let a=r.offsetLeft-24;z.current.scrollTo({left:a,top:0,behavior:"auto"})},[j,B]),(0,n.useEffect)(()=>{if(V.current&&S.length>0){let e=V.current.clientWidth,t=V.current.scrollWidth;V.current.scrollTo({left:Math.max(0,(t-e)/2),top:0,behavior:"auto"}),setTimeout(()=>{if(V.current){let e=V.current.clientWidth,t=V.current.scrollWidth;V.current.scrollTo({left:Math.max(0,(t-e)/2),top:0,behavior:"auto"})}},100)}},[S]);let[_,J]=(0,n.useState)(null),[X,$]=(0,n.useState)(36e5),[K,G]=(0,n.useState)(!1),[Q,Z]=(0,n.useState)("none"),[ee,et]=(0,n.useState)({frequency:"weekly",interval:1,daysOfWeek:[],endDate:null}),[er,ea]=(0,n.useState)(!1),[en,es]=(0,n.useState)(!1);(0,n.useRef)();let[el,eo]=(0,n.useState)(!1);(0,n.useRef)();let ei=e=>{j&&(T({...u,dateYMD:p(j),start:"".concat(String(e).padStart(2,"0"),":00"),end:23===e?"23:59":"".concat(String(e+1).padStart(2,"0"),":00")}),k(!0))},ec=e=>{let{title:t,area:r,start:a,end:n,color:s,notes:l,repeatType:o,customRepeat:i,baseDate:c}=e,u=[],m=new Date(a),h=new Date(n).getTime()-m.getTime(),g=new Date(m);g.setFullYear(g.getFullYear()+1);let x=new Date(m),f=0;for(;x<=g&&f<365;){let e=new Date(x),a=new Date(e.getTime()+h);if(u.push({id:d(),title:t,area:r,start:e.getTime(),end:a.getTime(),color:s,notes:l,isRepeating:!0,repeatType:o,originalDate:m.getTime()}),"daily"===o)x.setDate(x.getDate()+1);else if("weekly"===o)x.setDate(x.getDate()+7);else if("monthly"===o)x.setMonth(x.getMonth()+1);else if("yearly"===o)x.setFullYear(x.getFullYear()+1);else if("custom"===o){if("daily"===i.frequency)x.setDate(x.getDate()+i.interval);else if("weekly"===i.frequency){if(i.daysOfWeek.length>0){let e=x.getDay(),t=null;for(let r=1;r<=7;r++){let a=(e+r)%7;if(i.daysOfWeek.includes(a)){t=a;break}}if(null!==t){let r=(t-e+7)%7;x.setDate(x.getDate()+r)}else x.setDate(x.getDate()+(7-e)+i.daysOfWeek[0]+(i.interval-1)*7)}else x.setDate(x.getDate()+7*i.interval)}else"monthly"===i.frequency?x.setMonth(x.getMonth()+i.interval):"yearly"===i.frequency&&x.setFullYear(x.getFullYear()+i.interval)}f++}return u},ed=e=>{J(e.id),$(Math.max(0,(e.end||0)-(e.start||0))||36e5),T({title:e.title||"",area:e.area||"",dateYMD:p(new Date(e.start)),start:h(e.start),end:h(e.end),notes:e.notes||""}),Y(!0)},eu=function(){let e,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!_)return;let r=R.find(e=>e.id===_);if(r){if(t&&r.isRepeating){let t=new Date(r.start);e=R.filter(e=>e.isRepeating&&e.originalDate===r.originalDate&&e.title===r.title?new Date(e.start)<t:e.id!==_)}else e=R.filter(e=>e.id!==_);P(e),Y(!1),J(null)}},[em,eh]=(0,n.useState)(0),[eg,ex]=(0,n.useState)(!1);(0,n.useEffect)(()=>{eh(Date.now());let e=setInterval(()=>eh(Date.now()),3e4);return()=>clearInterval(e)},[]);let ef=e=>3e5*Math.round(e/3e5),[ep,ev]=(0,n.useState)(null),[ey,eb]=(0,n.useState)(null),[ew,ej]=(0,n.useState)(!1),[eN,eD]=(0,n.useState)(null),[eS,eM]=(0,n.useState)(null),[eE,ek]=(0,n.useState)(null),[eC,eY]=(0,n.useState)(null),eL=(0,n.useRef)({startY:0,origStart:0,origEnd:0,duration:0,lastStartMs:null,moved:!1}),eT=(0,n.useRef)({startY:0,origStart:0,origEnd:0,lastStartMs:null,lastEndMs:null,moved:!1}),eF=(0,n.useRef)(null),eA=(0,n.useRef)(null),eR=(0,n.useRef)(!1),eP=(0,n.useMemo)(()=>{if(!j)return 0;let e=new Date(j);return e.setHours(0,0,0,0),e.getTime()},[j]),eW=(0,n.useMemo)(()=>eP?eP+864e5:0,[eP]),eI=(0,n.useCallback)((e,t)=>{let r=t-e,a=Math.max(eP,Math.min(e,eW-r));return[a,a+r]},[eP,eW]),eO=(0,n.useMemo)(()=>{if(!j||!em)return null;let e=new Date(em);return e.getFullYear()!==j.getFullYear()||e.getMonth()!==j.getMonth()||e.getDate()!==j.getDate()?null:(60*e.getHours()+e.getMinutes())/60*64},[em,j,64]);(0,n.useEffect)(()=>{ex(!1)},[j]),(0,n.useEffect)(()=>{if(null==eO||!q.current||eg)return;let e=q.current.getBoundingClientRect(),t=window.scrollY+e.top;window.scrollTo({top:Math.max(0,t+eO-240),behavior:"smooth"}),ex(!0)},[eO,j,eg]),(0,n.useEffect)(()=>{if(!ep)return;let e=document.body.style.touchAction,t=document.body.style.userSelect;document.body.style.touchAction="none",document.body.style.userSelect="none";let r=e=>{e.cancelable&&e.preventDefault();let t=(e.touches?e.touches[0].clientY:e.clientY)-eL.current.startY,r=eL.current.origStart+t/64*36e5,a=r+eL.current.duration;a=(r=ef(r))+eL.current.duration,[r,a]=eI(r,a),eL.current.lastStartMs=r,eL.current.moved=!0;let n=new Date(Math.max(r,eP));eb(Math.max(0,(n.getHours()+n.getMinutes()/60)*64))},a=()=>{if(eR.current)return;let e=eL.current.moved,t=eL.current.lastStartMs,r=eL.current.duration;if(ev(null),eb(null),eL.current={startY:0,origStart:0,origEnd:0,duration:0,lastStartMs:null,moved:!1},!e||null==t)return;let a=t+r;P(e=>e.map(e=>e.id===ep?{...e,start:t,end:a}:e))};return window.addEventListener("mousemove",r,{passive:!1}),window.addEventListener("mouseup",a,{passive:!0}),window.addEventListener("touchmove",r,{passive:!1}),window.addEventListener("touchend",a,{passive:!0}),()=>{document.body.style.touchAction=e,document.body.style.userSelect=t,window.removeEventListener("mousemove",r),window.removeEventListener("mouseup",a),window.removeEventListener("touchmove",r),window.removeEventListener("touchend",a)}},[ep,64,eP,eW,eI]),(0,n.useEffect)(()=>{if(!eS||!eE)return;let e=document.body.style.touchAction,t=document.body.style.userSelect;document.body.style.touchAction="none",document.body.style.userSelect="none";let r=e=>{e.cancelable&&e.preventDefault();let t=((e.touches?e.touches[0].clientY:e.clientY)-eT.current.startY)/64*36e5,r=eT.current.origStart,a=eT.current.origEnd;"top-left"===eE||"top-right"===eE?r=Math.min(r=ef(r=eT.current.origStart+t),a-9e5):("bottom-left"===eE||"bottom-right"===eE)&&(a=Math.max(a=ef(a=eT.current.origEnd+t),r+9e5)),[r,a]=eI(r,a),eT.current.lastStartMs=r,eT.current.lastEndMs=a,eT.current.moved=!0,eY({start:r,end:a})},a=()=>{if(eR.current)return;let e=eT.current.moved,t=eT.current.lastStartMs,r=eT.current.lastEndMs;eM(null),ek(null),eY(null),eT.current={startY:0,origStart:0,origEnd:0,lastStartMs:null,lastEndMs:null,moved:!1},e&&null!=t&&null!=r&&P(e=>e.map(e=>e.id===eS?{...e,start:t,end:r}:e))};return window.addEventListener("mousemove",r,{passive:!1}),window.addEventListener("mouseup",a,{passive:!0}),window.addEventListener("touchmove",r,{passive:!1}),window.addEventListener("touchend",a,{passive:!0}),()=>{document.body.style.touchAction=e,document.body.style.userSelect=t,window.removeEventListener("mousemove",r),window.removeEventListener("mouseup",a),window.removeEventListener("touchmove",r),window.removeEventListener("touchend",a)}},[eS,eE,64,eP,eW,eI,ef]),(0,n.useEffect)(()=>()=>{eF.current&&clearTimeout(eF.current)},[]),(0,n.useEffect)(()=>{let e=()=>{eF.current&&(clearTimeout(eF.current),eF.current=null),ev(null),eb(null),document.body.style.touchAction="",document.body.style.userSelect="",ej(!1),eD(null)};return window.addEventListener("pagehide",e),window.addEventListener("blur",e),document.addEventListener("visibilitychange",e),()=>{eR.current=!0,window.removeEventListener("pagehide",e),window.removeEventListener("blur",e),document.removeEventListener("visibilitychange",e),e()}},[]),(0,n.useEffect)(()=>{ep&&(eF.current&&clearTimeout(eF.current),ej(!1),eD(null))},[ep]),(0,n.useEffect)(()=>{if(!r)return;let e=document.querySelectorAll(".calendar-event"),t=e=>{let t=e.currentTarget.getAttribute("data-event-id");if(!t)return;let r=R.find(e=>e.id===t);if(!r)return;eF.current&&clearTimeout(eF.current);let a=e.touches[0];eA.current={x:a.clientX,y:a.clientY},ej(!0),eD(r.id),eF.current=setTimeout(()=>{if(eR.current)return;let e=r.end-r.start;ev(r.id),ej(!1),eD(null),eL.current={startY:a.clientY,origStart:r.start,origEnd:r.end,duration:e,lastStartMs:null,moved:!1};let t=new Date(Math.max(r.start,eP));eb(Math.max(0,(t.getHours()+t.getMinutes()/60)*64))},500)},a=e=>{var t,r,a,n;if(!ew||!eN)return;let s=e.touches&&e.touches[0];if(!s)return;let l=null!==(a=null===(t=eA.current)||void 0===t?void 0:t.x)&&void 0!==a?a:s.clientX,o=null!==(n=null===(r=eA.current)||void 0===r?void 0:r.y)&&void 0!==n?n:s.clientY;Math.hypot(s.clientX-l,s.clientY-o)>10&&(eF.current&&(clearTimeout(eF.current),eF.current=null),ej(!1),eD(null))},n=()=>{ew&&eN&&(eF.current&&clearTimeout(eF.current),ej(!1),eD(null))};return e.forEach(e=>{e.addEventListener("touchstart",t,{passive:!1}),e.addEventListener("touchmove",a,{passive:!0}),e.addEventListener("touchend",n,{passive:!1}),e.addEventListener("touchcancel",n,{passive:!1})}),()=>{e.forEach(e=>{e.removeEventListener("touchstart",t),e.removeEventListener("touchmove",a),e.removeEventListener("touchend",n),e.removeEventListener("touchcancel",n)})}},[r,R,eP,64,ew,eN]);let ez=(0,n.useMemo)(()=>eP&&eW?R.filter(e=>e.end>eP&&e.start<eW):[],[R,eP,eW]);return(j&&c[j.getDay()],j)?(0,a.jsxs)("div",{className:"min-h-screen bg-white text-[#374151] pb-24",children:[(0,a.jsxs)("div",{className:"fixed top-0 left-0 right-0 z-50",children:[(0,a.jsx)("div",{className:"absolute top-0 left-0 right-0 bg-[#F7F6F3]",style:{height:"".concat(b.top,"px")}}),(0,a.jsxs)("div",{className:"bg-[#F7F6F3]",style:{marginTop:"".concat(b.top,"px")},children:[(0,a.jsxs)("header",{className:"px-4 pt-16 pb-3 shadow-sm flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("button",{className:"text-lg px-2","aria-label":"Previous Day",onClick:()=>j&&D(new Date(j.getFullYear(),j.getMonth(),j.getDate()-1)),disabled:!j,children:"‹"}),(0,a.jsx)("div",{className:"font-semibold",children:O}),(0,a.jsx)("button",{className:"text-lg px-2","aria-label":"Next Day",onClick:()=>j&&D(new Date(j.getFullYear(),j.getMonth(),j.getDate()+1)),disabled:!j,children:"›"})]}),(0,a.jsx)("div",{className:"flex items-center gap-2",children:(0,a.jsx)("button",{onClick:()=>e.push("/settings"),title:"Settings","aria-label":"Settings",className:"inline-flex items-center justify-center w-10 h-10 rounded-xl bg-gray-100 border border-gray-200 text-gray-600 hover:bg-gray-200 hover:text-gray-800 transition-colors duration-200",children:(0,a.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"w-5 h-5",children:[(0,a.jsx)("path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"}),(0,a.jsx)("circle",{cx:"12",cy:"12",r:"3"})]})})})]}),(0,a.jsx)("div",{ref:z,className:"flex gap-2 overflow-x-hidden px-3 pt-2 pb-1 -mt-1",children:B.map((e,t)=>{let r=j&&e.toDateString()===j.toDateString(),n=e.toDateString()===w.toDateString();return(0,a.jsxs)("button",{ref:e=>U.current[t]=e,onClick:()=>D(new Date(e)),className:"relative flex flex-col items-center w-14 flex-shrink-0 py-2 rounded-md border outline-none focus:outline-none focus-visible:outline-none ring-0 focus:ring-0 focus-visible:ring-0 ".concat(r?"bg-[#6B7280] text-white border-transparent":"text-[#374151] bg-transparent border-transparent"),title:e.toDateString(),children:[(0,a.jsx)("div",{className:"text-[11px]",children:c[e.getDay()]}),(0,a.jsx)("div",{className:"text-sm font-semibold",children:e.getDate()}),(0,a.jsx)("div",{className:"absolute bottom-1 left-1/2 -translate-x-1/2 w-1 h-1 rounded-full bg-[#6B7280] ".concat(n&&!r?"opacity-100":"opacity-0")})]},t)})})]})]}),(0,a.jsx)("div",{className:"flex-1 overflow-y-auto",style:{paddingTop:"".concat(220,"px")},children:(0,a.jsx)("div",{ref:H,className:"relative px-2",children:(0,a.jsxs)("div",{className:"grid grid-cols-[56px_minmax(0,1fr)]",children:[(0,a.jsx)("div",{className:"flex flex-col items-end pr-2",children:r&&i.map(e=>(0,a.jsx)("div",{className:"text-xs text-gray-500 flex items-start",style:{height:"".concat(64,"px")},children:(0,a.jsx)("div",{className:"-translate-y-1",children:"".concat(e%12==0?12:e%12," ").concat(e<12?"AM":"PM")})},e))}),(0,a.jsxs)("div",{ref:q,className:"relative border-l border-gray-200 overflow-visible",style:{touchAction:ep?"none":void 0,userSelect:ep?"none":void 0},children:[i.map(e=>(0,a.jsx)("div",{className:"h-16 border-b border-gray-100 hover:bg-gray-50 cursor-pointer",onClick:()=>ei(e)},e)),r&&null!=eO&&(0,a.jsxs)("div",{className:"pointer-events-none absolute inset-x-0 z-20",style:{top:Math.max(0,Math.min(eO,1535))+"px"},children:[(0,a.jsxs)("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",className:"absolute -left-3 -translate-y-1/2",style:{top:0},"aria-hidden":"true",children:[(0,a.jsx)("rect",{x:"6",y:"2.5",width:"12",height:"3",rx:"1.5",stroke:"#ef4444",strokeWidth:"2"}),(0,a.jsx)("rect",{x:"6",y:"18.5",width:"12",height:"3",rx:"1.5",stroke:"#ef4444",strokeWidth:"2"}),(0,a.jsx)("path",{d:"M8 6c0 3.2 2.2 4.7 4 6-1.8 1.3-4 2.8-4 6",stroke:"#ef4444",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,a.jsx)("path",{d:"M16 6c0 3.2-2.2 4.7-4 6 1.8 1.3 4 2.8 4 6",stroke:"#ef4444",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),(0,a.jsx)("div",{className:"absolute right-0 -translate-y-full mb-1 px-1.5 py-0.5 text-[10px] rounded bg-red-500 text-white shadow",style:{top:0},"aria-hidden":"true",children:function(e){let t=new Date(e),r=t.getHours(),a=String(t.getMinutes()).padStart(2,"0");return"".concat((r+11)%12+1,":").concat(a," ").concat(r>=12?"PM":"AM")}(em)}),(0,a.jsx)("div",{className:"h-[2px] bg-red-500 w-full"})]}),r&&ez.map(e=>{let t=eS===e.id&&eC?eC.start:e.start,r=eS===e.id&&eC?eC.end:e.end,n=Math.max(t,eP),s=Math.min(r,eW),l=new Date(n),o=(l.getHours()+l.getMinutes()/60)*64,i=F(e.area)||e.color||"#E9E5F9";return(0,a.jsxs)("div",{"data-event-id":e.id,className:"absolute left-1 right-1 rounded-md shadow calendar-event select-none ".concat(ep===e.id?"cursor-grabbing":ew&&eN===e.id?"cursor-wait":eS===e.id?"cursor-ns-resize":"cursor-grab"),style:{top:(ep===e.id&&null!=ey?ey:Math.max(0,o))+"px",height:Math.max(24,(s-n)/36e5*64)+"px",background:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.4;if(!e)return"rgba(0,0,0,".concat(t,")");let r=e.trim();if(/^#([0-9a-f]{3}){1,2}$/i.test(r)){let e,a,n;return 4===r.length?(e=parseInt(r[1]+r[1],16),a=parseInt(r[2]+r[2],16),n=parseInt(r[3]+r[3],16)):(e=parseInt(r.slice(1,3),16),a=parseInt(r.slice(3,5),16),n=parseInt(r.slice(5,7),16)),"rgba(".concat(e,", ").concat(a,", ").concat(n,", ").concat(t,")")}let a=r.match(/^rgba?\(([^)]+)\)$/i);if(a){let[e,r,n]=a[1].split(",").map(e=>e.trim());return"rgba(".concat(Number(e),", ").concat(Number(r),", ").concat(Number(n),", ").concat(t,")")}return r}(i,ew&&eN===e.id?.2:eS===e.id?.7:.4),borderLeft:"3px solid ".concat(i),willChange:ep===e.id||eS===e.id?"top, height":void 0,opacity:ew&&eN===e.id?.7:eS===e.id?.9:1,touchAction:ep===e.id||eS===e.id?"none":"pan-y"},title:e.title,onMouseDown:t=>{t.preventDefault(),t.stopPropagation(),eF.current&&clearTimeout(eF.current),ej(!0),eD(e.id),eF.current=setTimeout(()=>{if(eR.current)return;let r=e.end-e.start;ev(e.id),ej(!1),eD(null),eL.current={startY:t.clientY,origStart:e.start,origEnd:e.end,duration:r,lastStartMs:null,moved:!1};let a=new Date(Math.max(e.start,eP));eb(Math.max(0,(a.getHours()+a.getMinutes()/60)*64))},500)},onMouseUp:t=>{ew&&eN===e.id&&(eF.current&&clearTimeout(eF.current),ej(!1),eD(null))},onMouseLeave:t=>{ew&&eN===e.id&&(eF.current&&clearTimeout(eF.current),ej(!1),eD(null))},onClick:t=>{eL.current.moved||eT.current.moved?(t.cancelable&&t.preventDefault(),t.stopPropagation()):ed(e)},children:[(0,a.jsxs)("div",{className:"text-[11px] px-2 py-1 leading-tight",children:[(0,a.jsx)("div",{className:"font-semibold truncate",children:e.title}),e.area&&(0,a.jsx)("div",{className:"text-[10px] opacity-70 truncate",children:e.area})]}),!ep&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"absolute top-0 left-0 w-6 h-6 cursor-ns-resize select-none ".concat(eS===e.id&&"top-left"===eE?"opacity-100":"opacity-0"),onMouseDown:t=>{t.stopPropagation(),t.preventDefault(),eF.current&&(clearTimeout(eF.current),eF.current=null),ej(!1),eD(null),eM(e.id),ek("top-left"),eT.current={startY:t.clientY,origStart:e.start,origEnd:e.end,lastStartMs:e.start,lastEndMs:e.end,moved:!1}},onTouchStart:t=>{t.stopPropagation(),t.preventDefault(),eF.current&&(clearTimeout(eF.current),eF.current=null),ej(!1),eD(null),eM(e.id),ek("top-left"),eT.current={startY:t.touches[0].clientY,origStart:e.start,origEnd:e.end,lastStartMs:e.start,lastEndMs:e.end,moved:!1}}}),(0,a.jsx)("div",{className:"absolute top-0 right-0 w-6 h-6 cursor-ns-resize select-none ".concat(eS===e.id&&"top-right"===eE?"opacity-100":"opacity-0"),onMouseDown:t=>{t.stopPropagation(),t.preventDefault(),eF.current&&(clearTimeout(eF.current),eF.current=null),ej(!1),eD(null),eM(e.id),ek("top-right"),eT.current={startY:t.clientY,origStart:e.start,origEnd:e.end,lastStartMs:e.start,lastEndMs:e.end,moved:!1}},onTouchStart:t=>{t.stopPropagation(),t.preventDefault(),eF.current&&(clearTimeout(eF.current),eF.current=null),ej(!1),eD(null),eM(e.id),ek("top-right"),eT.current={startY:t.touches[0].clientY,origStart:e.start,origEnd:e.end,lastStartMs:e.start,lastEndMs:e.end,moved:!1}}}),(0,a.jsx)("div",{className:"absolute bottom-0 left-0 w-6 h-6 cursor-ns-resize select-none ".concat(eS===e.id&&"bottom"===eE?"opacity-100":"opacity-0"),onMouseDown:t=>{t.stopPropagation(),t.preventDefault(),eF.current&&(clearTimeout(eF.current),eF.current=null),ej(!1),eD(null),eM(e.id),ek("bottom-left"),eT.current={startY:t.clientY,origStart:e.start,origEnd:e.end,lastStartMs:e.start,lastEndMs:e.end,moved:!1}},onTouchStart:t=>{t.stopPropagation(),t.preventDefault(),eF.current&&(clearTimeout(eF.current),eF.current=null),ej(!1),eD(null),eM(e.id),ek("bottom-left"),eT.current={startY:t.touches[0].clientY,origStart:e.start,origEnd:e.end,lastStartMs:e.start,lastEndMs:e.end,moved:!1}}}),(0,a.jsx)("div",{className:"absolute bottom-0 right-0 w-6 h-6 cursor-ns-resize select-none ".concat(eS===e.id&&"bottom-right"===eE?"opacity-100":"opacity-0"),onMouseDown:t=>{t.stopPropagation(),t.preventDefault(),eF.current&&(clearTimeout(eF.current),eF.current=null),ej(!1),eD(null),eM(e.id),ek("bottom-right"),eT.current={startY:t.clientY,origStart:e.start,origEnd:e.end,lastStartMs:e.start,lastEndMs:e.end,moved:!1}},onTouchStart:t=>{t.stopPropagation(),t.preventDefault(),eF.current&&(clearTimeout(eF.current),eF.current=null),ej(!1),eD(null),eM(e.id),ek("bottom-right"),eT.current={startY:t.touches[0].clientY,origStart:e.start,origEnd:e.end,lastStartMs:e.start,lastEndMs:e.end,moved:!1}}})]})]},e.id)})]})]})})}),(0,a.jsx)("div",{className:"fixed bottom-0 left-0 right-0 p-3 pb-7 z-[9999]",children:(0,a.jsxs)("div",{className:"max-w-md mx-auto grid grid-cols-3 gap-3",children:[(0,a.jsx)("button",{onClick:()=>e.push("/"),className:"h-12 w-full rounded-2xl bg-white text-gray-700 font-medium border-2 border-gray-200 hover:bg-gray-50 transition-colors duration-200 shadow-sm",children:"Dashboard"}),(0,a.jsx)("button",{className:"h-12 w-full rounded-2xl bg-gray-900 text-white font-semibold shadow-lg",disabled:!0,"aria-current":"page",children:"Calendar"}),(0,a.jsx)("button",{onClick:()=>e.push("/connect"),className:"h-12 w-full rounded-2xl bg-white text-gray-700 font-medium border-2 border-gray-200 hover:bg-gray-50 transition-colors duration-200 shadow-sm",children:"Discover"})]})}),(0,a.jsxs)("div",{className:"relative z-10",children:[(0,a.jsx)("div",{className:"absolute left-0 top-1/2 -translate-y-1/2 w-6 h-6 bg-gradient-to-r from-white to-transparent pointer-events-none z-10"}),(0,a.jsx)("div",{className:"absolute right-0 top-1/2 -translate-y-1/2 w-6 h-6 bg-gradient-to-l from-white to-transparent pointer-events-none z-10"}),(0,a.jsx)("div",{ref:V,className:"flex flex-row gap-2 px-4 select-none mt-8 mb-6 overflow-x-auto scroll-smooth scrollbar-thin scrollbar-track-transparent scrollbar-thumb-gray-300",children:(0,a.jsx)("div",{className:"flex flex-row gap-2 min-w-max px-2",children:[...S].reverse().map((t,r)=>{let{label:n,timeSpent:s,goal:l,days:o,color:i}=t,d=c[new Date().getDay()],u=Number(l||0),m=Number(o&&o[d]||0),h=m>u,g=Math.min(u>0?m/u*100:0,100).toFixed(0),x=h?Math.min(u>0?(m-u)/u*100:0,100).toFixed(0):0,f={color:i},p=(null==f?void 0:f.color)||"#6B7280";return(0,a.jsxs)("div",{className:"flex flex-col items-center pointer-events-auto cursor-pointer hover:opacity-80 transition-opacity",onClick:()=>{e.push("/?focus=".concat(encodeURIComponent(n),"&scroll=top"))},title:"Click to view ".concat(n," details"),children:[(0,a.jsxs)("svg",{width:54,height:54,viewBox:"0 0 36 36",className:"block mb-1",children:[(0,a.jsx)("path",{className:"text-gray-300",stroke:"currentColor",strokeWidth:"3",fill:"none",d:"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831"}),(0,a.jsx)("path",{stroke:p,strokeOpacity:h?"0.3":"0.55",strokeWidth:"3",strokeDasharray:"".concat(g,", 100"),strokeLinecap:"round",fill:"none",transform:"rotate(-90 18 18)",d:"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831"}),h&&x>0&&(0,a.jsx)("g",{transform:"scale(0.88) translate(2.2 2.2)",children:(0,a.jsx)("path",{stroke:p,strokeOpacity:"0.8",strokeWidth:"2.5",strokeDasharray:"".concat(x,", 100"),strokeLinecap:"round",fill:"none",transform:"rotate(-90 18 18)",d:"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831"})}),(0,a.jsx)("foreignObject",{x:"8",y:"8",width:"20",height:"20",children:(0,a.jsxs)("div",{xmlns:"http://www.w3.org/1999/xhtml",className:"w-full h-full flex flex-col items-center justify-center leading-tight",children:[(0,a.jsx)("div",{className:"text-[7px] font-bold ".concat(h?"text-red-600":"text-[#374151]"),children:function(e){let t=Math.max(0,Number(e)||0);return t<1?"".concat(Math.round(60*t)).concat("min"):"".concat((Math.round(10*(Number(t)||0))/10).toFixed(1).replace(/\.0$/,"")).concat(1===Number(t)?"hr":"hrs")}(Math.abs((u||0)-(m||0)))}),(0,a.jsx)("div",{className:"text-[5px] uppercase -mt-0.5 ".concat(h?"text-red-500 font-semibold":"text-gray-500"),children:h?"OVER":"LEFT"})]})})]}),(0,a.jsx)("div",{className:"text-xs font-medium text-[#374151] truncate max-w-[60px]",children:n})]},n)})})})]}),E&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black/10 backdrop-blur-sm flex items-center justify-center z-50 pb-20",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-4 w-[92%] max-w-md ".concat(er?"max-h-[90vh] flex flex-col":""),children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,a.jsx)("h3",{className:"font-semibold",children:"New Event"}),(0,a.jsx)("button",{className:"text-sm",onClick:()=>{k(!1),T(u)},children:"Cancel"})]}),(0,a.jsxs)("div",{className:er?"flex-1 overflow-y-auto":"",children:[(0,a.jsx)("label",{className:"text-sm",children:"Title"}),(0,a.jsx)("input",{value:L.title,onChange:e=>T({...L,title:e.target.value}),className:"w-full border rounded px-3 py-2 mb-3",placeholder:"e.g., Product Development"}),(0,a.jsx)("label",{className:"text-sm",children:"Focus Area"}),(0,a.jsxs)("select",{value:L.area,onChange:e=>T({...L,area:e.target.value}),className:"w-full border rounded px-3 py-2 mb-3",children:[(0,a.jsx)("option",{value:"",children:"(none)"}),S.map(e=>(0,a.jsx)("option",{value:e.label,children:e.label},e.label))]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,a.jsx)("div",{className:"w-4 h-4 rounded-full border",style:{background:F(L.area)}}),(0,a.jsx)("span",{className:"text-xs text-gray-600",children:"Event color follows the Focus Area"})]}),(0,a.jsx)("label",{className:"text-sm",children:"Date"}),(0,a.jsxs)("div",{className:"relative mb-3",children:[(0,a.jsx)("div",{role:"button",tabIndex:0,className:"w-full border rounded px-3 py-2 text-left bg-white cursor-pointer",onClick:()=>es(e=>!e),onKeyPress:e=>{("Enter"===e.key||" "===e.key)&&es(e=>!e)},children:y(L.dateYMD)}),en&&(0,a.jsx)("div",{className:"absolute left-0 z-50",children:(0,a.jsx)(N,{valueYMD:L.dateYMD,onChange:e=>T(t=>({...t,dateYMD:e})),onClose:()=>es(!1)})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-2 mb-3 items-start overflow-hidden",children:[(0,a.jsxs)("div",{className:"pr-1 min-w-0",children:[(0,a.jsx)("label",{className:"text-sm",children:"Start"}),(0,a.jsx)("input",{type:"time",value:L.start,onChange:e=>{let t=e.target.value,r=x(t,X);T(e=>({...e,start:t,end:r}))},className:"w-full min-w-0 border rounded px-3 py-2 sm:max-w-full max-w-[160px]",min:"00:00",max:"23:59",style:{width:"100%"}})]}),(0,a.jsxs)("div",{className:"pl-1 min-w-0",children:[(0,a.jsx)("label",{className:"text-sm",children:"End"}),(0,a.jsx)("input",{type:"time",value:L.end,onChange:e=>T({...L,end:e.target.value}),className:"w-full min-w-0 border rounded px-3 py-2 sm:max-w-full max-w-[160px]",min:"00:00",max:"23:59",style:{width:"100%"}})]})]}),(0,a.jsx)("label",{className:"text-sm",children:"Notes"}),(0,a.jsx)("textarea",{value:L.notes,onChange:e=>T({...L,notes:e.target.value}),className:"w-full border rounded px-3 py-2 mb-4",rows:3,placeholder:"What will you accomplish during this timeframe?"}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,a.jsx)("input",{type:"checkbox",id:"isRepeating",checked:K,onChange:e=>{G(e.target.checked),e.target.checked||(Z("none"),ea(!1))},className:"w-4 h-4"}),(0,a.jsx)("label",{htmlFor:"isRepeating",className:"text-sm font-medium",children:"Do you want this to be a repeating event?"})]}),K&&(0,a.jsxs)("div",{className:"ml-6 space-y-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm",children:"Repeat"}),(0,a.jsxs)("select",{value:Q,onChange:e=>{Z(e.target.value),"custom"===e.target.value?ea(!0):ea(!1)},className:"w-full border rounded px-3 py-2 mt-1",children:[(0,a.jsx)("option",{value:"none",children:"None"}),(0,a.jsx)("option",{value:"daily",children:"Daily"}),(0,a.jsx)("option",{value:"weekly",children:"Weekly"}),(0,a.jsx)("option",{value:"monthly",children:"Monthly"}),(0,a.jsx)("option",{value:"yearly",children:"Yearly"}),(0,a.jsx)("option",{value:"custom",children:"Custom..."})]})]}),er&&(0,a.jsxs)("div",{className:"bg-gray-50 p-3 rounded border",children:[(0,a.jsxs)("div",{className:"mb-3",children:[(0,a.jsx)("label",{className:"text-sm",children:"Frequency"}),(0,a.jsxs)("select",{value:ee.frequency,onChange:e=>et({...ee,frequency:e.target.value}),className:"w-full border rounded px-3 py-2 mt-1",children:[(0,a.jsx)("option",{value:"daily",children:"Daily"}),(0,a.jsx)("option",{value:"weekly",children:"Weekly"}),(0,a.jsx)("option",{value:"monthly",children:"Monthly"}),(0,a.jsx)("option",{value:"yearly",children:"Yearly"})]})]}),(0,a.jsxs)("div",{className:"mb-3",children:[(0,a.jsx)("label",{className:"text-sm",children:"Every"}),(0,a.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,a.jsx)("input",{type:"number",min:"1",max:"99",value:ee.interval,onChange:e=>et({...ee,interval:parseInt(e.target.value)||1}),className:"w-16 border rounded px-2 py-1 text-center"}),(0,a.jsx)("span",{className:"text-sm text-gray-600",children:"daily"===ee.frequency?"day(s)":"weekly"===ee.frequency?"week(s)":"monthly"===ee.frequency?"month(s)":"year(s)"})]})]}),"weekly"===ee.frequency&&(0,a.jsxs)("div",{className:"mb-3",children:[(0,a.jsx)("label",{className:"text-sm",children:"Repeat on:"}),(0,a.jsx)("div",{className:"flex gap-1 mt-2",children:["S","M","T","W","T","F","S"].map((e,t)=>(0,a.jsx)("button",{type:"button",onClick:()=>{let e=ee.daysOfWeek.includes(t)?ee.daysOfWeek.filter(e=>e!==t):[...ee.daysOfWeek,t];et({...ee,daysOfWeek:e})},className:"w-8 h-8 rounded text-xs font-medium ".concat(ee.daysOfWeek.includes(t)?"bg-blue-500 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:e},t))})]}),(0,a.jsx)("div",{className:"text-xs text-gray-500",children:"Events will repeat for up to 1 year from the start date."})]})]})]})]}),(0,a.jsxs)("div",{className:"flex justify-end gap-2 ".concat(er?"mt-4 flex-shrink-0":""),children:[(0,a.jsx)("button",{className:"px-4 py-2 bg-gray-200 rounded",onClick:()=>{k(!1),T(u)},children:"Close"}),(0,a.jsx)("button",{className:"px-4 py-2 bg-[#6B7280] text-white rounded",onClick:()=>{if(!L.title&&!L.area||!j)return;let e=f(L.dateYMD||p(j)),t=t=>{let[r,a]=t.split(":").map(Number),n=new Date(e);return n.setHours(r,a,0,0),n.getTime()},r=t(L.start),a=t(L.end);a<=r&&(a+=864e5);let n=F(L.area);K&&"none"!==Q?P([...R,...ec({title:L.title||L.area,area:L.area||"",start:r,end:a,color:n,notes:L.notes||"",repeatType:Q,customRepeat:ee,baseDate:e})]):P([...R,{id:d(),title:L.title||L.area,area:L.area||"",start:r,end:a,color:n,notes:L.notes||""}]),D(new Date(e)),k(!1),T(u),G(!1),Z("none"),et({frequency:"weekly",interval:1,daysOfWeek:[],endDate:null})},children:"Add"})]})]})}),C&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black/10 backdrop-blur-sm flex items-center justify-center z-50",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-4 w-[92%] max-w-md",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,a.jsx)("h3",{className:"font-semibold",children:"Edit Event"}),(0,a.jsx)("button",{className:"text-sm",onClick:()=>{Y(!1),J(null)},children:"Close"})]}),(0,a.jsx)("label",{className:"text-sm",children:"Title"}),(0,a.jsx)("input",{value:L.title,onChange:e=>T({...L,title:e.target.value}),className:"w-full border rounded px-3 py-2 mb-3"}),(0,a.jsx)("label",{className:"text-sm",children:"Focus Area"}),(0,a.jsxs)("select",{value:L.area,onChange:e=>T({...L,area:e.target.value}),className:"w-full border rounded px-3 py-2 mb-3",children:[(0,a.jsx)("option",{value:"",children:"(none)"}),S.map(e=>(0,a.jsx)("option",{value:e.label,children:e.label},e.label))]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,a.jsx)("div",{className:"w-4 h-4 rounded-full border",style:{background:F(L.area||"")}}),(0,a.jsx)("span",{className:"text-xs text-gray-600",children:"Color auto-updates from Focus Area"})]}),(0,a.jsx)("label",{className:"text-sm",children:"Date"}),(0,a.jsxs)("div",{className:"relative mb-3",children:[(0,a.jsx)("div",{role:"button",tabIndex:0,className:"w-full border rounded px-3 py-2 text-left bg-white cursor-pointer",onClick:()=>eo(e=>!e),onKeyPress:e=>{("Enter"===e.key||" "===e.key)&&eo(e=>!e)},children:y(L.dateYMD)}),el&&(0,a.jsx)("div",{className:"absolute left-0 z-50",children:(0,a.jsx)(N,{valueYMD:L.dateYMD,onChange:e=>T(t=>({...t,dateYMD:e})),onClose:()=>eo(!1)})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-2 mb-3 items-start overflow-hidden",children:[(0,a.jsxs)("div",{className:"pr-1 min-w-0",children:[(0,a.jsx)("label",{className:"text-sm",children:"Start"}),(0,a.jsx)("input",{type:"time",value:L.start,onChange:e=>{let t=e.target.value,r=x(t,X);T(e=>({...e,start:t,end:r}))},className:"w-full min-w-0 border rounded px-3 py-2 sm:max-w-full max-w-[160px]",min:"00:00",max:"23:59",style:{width:"100%"}})]}),(0,a.jsxs)("div",{className:"pl-1 min-w-0",children:[(0,a.jsx)("label",{className:"text-sm",children:"End"}),(0,a.jsx)("input",{type:"time",value:L.end,onChange:e=>{let t=e.target.value,r=Math.max(0,g(t)-g(L.start));r>0&&$(r),T(e=>({...e,end:t}))},className:"w-full min-w-0 border rounded px-3 py-2 sm:max-w-full max-w-[160px]",min:"00:00",max:"23:59",style:{width:"100%"}})]})]}),(0,a.jsx)("label",{className:"text-sm",children:"Notes"}),(0,a.jsx)("textarea",{value:L.notes,onChange:e=>T({...L,notes:e.target.value}),className:"w-full border rounded px-3 py-2 mb-4",rows:3}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(()=>{let e=R.find(e=>e.id===_);return e&&e.isRepeating?(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)("button",{className:"px-4 py-2 bg-red-500 text-white rounded text-xs leading-tight",onClick:()=>eu(!1),children:["Delete This",(0,a.jsx)("br",{}),"Event"]}),(0,a.jsxs)("button",{className:"px-4 py-2 bg-red-600 text-white rounded text-xs leading-tight",onClick:()=>eu(!0),children:["Delete Future",(0,a.jsx)("br",{}),"Events"]})]}):(0,a.jsx)("button",{className:"px-4 py-2 bg-red-500 text-white rounded",onClick:eu,children:"Delete"})})(),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("button",{className:"px-4 py-2 bg-gray-200 rounded",onClick:()=>{Y(!1),J(null)},children:"Cancel"}),(0,a.jsx)("button",{className:"px-4 py-2 bg-[#6B7280] text-white rounded",onClick:()=>{if(!_)return;let e=f(L.dateYMD||p(j)),t=t=>{let[r,a]=t.split(":").map(Number),n=new Date(e);return n.setHours(r,a,0,0),n.getTime()},r=t(L.start),a=t(L.end);a<=r&&(a+=864e5),P(R.map(e=>e.id===_?{...e,title:L.title||L.area,area:L.area||"",start:r,end:a,color:F(L.area||e.area),notes:L.notes||""}:e)),Y(!1),J(null)},children:"Save"})]})]})]})})]}):(0,a.jsx)("div",{className:"min-h-screen bg-white text-[#374151] flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-lg font-semibold mb-2",children:"Loading Calendar..."}),(0,a.jsx)("div",{className:"text-sm text-gray-500",children:"Please wait while we prepare your calendar view."})]})})}function S(){return(0,a.jsx)(n.Suspense,{fallback:(0,a.jsx)("div",{className:"min-h-screen bg-[#F7F6F3] flex items-center justify-center",children:(0,a.jsx)("div",{className:"text-[#374151]",children:"Loading calendar..."})}),children:(0,a.jsx)(D,{})})}}},function(e){e.O(0,[971,117,744],function(){return e(e.s=6115)}),_N_E=e.O()}]);