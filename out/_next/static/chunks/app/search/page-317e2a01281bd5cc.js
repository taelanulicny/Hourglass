(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[797],{8482:function(e,t,r){Promise.resolve().then(r.bind(r,5420))},9376:function(e,t,r){"use strict";var a=r(5475);r.o(a,"useRouter")&&r.d(t,{useRouter:function(){return a.useRouter}}),r.o(a,"useSearchParams")&&r.d(t,{useSearchParams:function(){return a.useSearchParams}})},5420:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return d}});var a=r(7437),l=r(9376),s=r(2265);let n=()=>{let[e,t]=(0,s.useState)({top:0,right:0,bottom:0,left:0}),[r,a]=(0,s.useState)(!1);return(0,s.useEffect)(()=>{if(a(!0),/iPad|iPhone|iPod/.test(navigator.userAgent)||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1){let e=getComputedStyle(document.documentElement),r=parseInt(e.getPropertyValue("env(safe-area-inset-top)")||"0",10);t({top:r,right:parseInt(e.getPropertyValue("env(safe-area-inset-right)")||"0",10),bottom:parseInt(e.getPropertyValue("env(safe-area-inset-bottom)")||"0",10),left:parseInt(e.getPropertyValue("env(safe-area-inset-left)")||"0",10)})}},[r]),e};function o(e){return(e||"").toString().trim().toLowerCase().replace(/[-_]+/g," ")}function i(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];try{if(!e)return t;return JSON.parse(e)||t}catch(e){return console.warn("Failed to parse JSON:",e),t}}function c(e){return e.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}function d(){let e=(0,l.useRouter)(),t=n(),[r,d]=(0,s.useState)(!1),[u,h]=(0,s.useState)([]),[x,m]=(0,s.useState)([]),[g,f]=(0,s.useState)(""),[p,b]=(0,s.useState)("all"),[v,w]=(0,s.useState)("all");(0,s.useEffect)(()=>{d(!0)},[]),(0,s.useEffect)(()=>{m(function(){try{let e=localStorage.getItem("focusCategories");if(!e)return[];let t=JSON.parse(e);return Array.isArray(t)?t:[]}catch(e){return[]}}())},[]),(0,s.useEffect)(()=>{if(!r)return;let e=()=>{try{let e=function(){try{let e=[],t=new Set;for(let r of["hourglassEvents:v1","calendarEvents","calendar-items","events"]){let a=localStorage.getItem(r);if(a)try{let r=i(a,[]);if(Array.isArray(r))for(let a of r){let r=(null==a?void 0:a.id)||"".concat(a.title||"","-").concat(a.start||"");r&&!t.has(r)&&(t.add(r),e.push(a))}}catch(e){}}let r=localStorage.getItem("googleEvents:v1"),a=r?i(r,[]):[],l=localStorage.getItem("googleEventCustomizations:v1"),s=l?i(l,{}):{},n=localStorage.getItem("focusCategories"),c=n?i(n,[]):[],d=a.map(e=>{let t=s[e.id];if(t&&t.area){let r=c.find(e=>o(e.label)===o(t.area));return{...e,area:t.area,color:(null==r?void 0:r.color)||e.color,source:"google"}}return null}).filter(e=>null!==e&&e.area),u=[...e],h=new Set(e.map(e=>e.id));for(let e of d)h.has(e.id)||u.push(e);return u}catch(e){console.warn("Failed to load all events:",e);try{let e=[],t=new Set;for(let r of["hourglassEvents:v1","calendarEvents","calendar-items","events"]){let a=localStorage.getItem(r);if(a)try{let r=i(a,[]);if(Array.isArray(r))for(let a of r){let r=(null==a?void 0:a.id)||"".concat(a.title||"","-").concat(a.start||"");r&&!t.has(r)&&(t.add(r),e.push(a))}}catch(e){}}return e}catch(e){return[]}}}();h(e)}catch(e){console.warn("Failed to load events",e)}};e();let t=()=>e();return window.addEventListener("calendarEventsUpdated",t),window.addEventListener("storage",t),()=>{window.removeEventListener("calendarEventsUpdated",t),window.removeEventListener("storage",t)}},[r]);let y=(0,s.useMemo)(()=>{if(!r)return[];let e=new Date;e.setHours(0,0,0,0);let t=u.filter(t=>{let r=new Date(new Date(t.start));if(r.setHours(0,0,0,0),"past"===v&&r>=e||"future"===v&&r<e||"all"!==p&&t.area!==p)return!1;if(g.trim()){let e=g.toLowerCase(),r=(t.title||"").toLowerCase(),a=(t.notes||"").toLowerCase(),l=(t.area||"").toLowerCase();if(!r.includes(e)&&!a.includes(e)&&!l.includes(e))return!1}return!0});return t.sort((e,t)=>{let r=new Date(e.start),a=new Date(t.start);if("past"===v)return a-r;if("future"===v)return r-a;{let e=new Date;e.setHours(0,0,0,0);let t=new Date(r);t.setHours(0,0,0,0);let l=new Date(a);l.setHours(0,0,0,0);let s=t<e,n=l<e;return s&&!n?-1:!s&&n?1:s&&n?a-r:r-a}}),t},[u,g,p,v,r]),j=(0,s.useMemo)(()=>{let e=new Date;return e.setHours(0,0,0,0),e},[]);return(0,a.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-blue-100 via-purple-50 to-pink-50 text-white pb-24",children:[(0,a.jsx)("div",{className:"fixed top-0 left-0 right-0 z-50",children:(0,a.jsx)("div",{className:"bg-white/70 backdrop-blur-xl border-b border-white/30 shadow-lg",style:{paddingTop:"".concat(Math.max(t.top,44),"px")},children:(0,a.jsx)("header",{className:"px-4 pt-4 pb-4 flex items-center justify-between",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("button",{onClick:()=>e.back(),className:"text-gray-900 hover:opacity-70 transition-all duration-200 p-2","aria-label":"Back",children:(0,a.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),(0,a.jsx)("h1",{className:"font-semibold text-lg text-gray-900",children:"Search Events"})]})})})}),(0,a.jsx)("div",{className:"flex-1 overflow-y-auto",style:{paddingTop:"".concat(Math.max(t.top,44)+80,"px")},children:r?(0,a.jsxs)("div",{className:"px-4 py-4 max-w-md mx-auto",children:[(0,a.jsx)("div",{className:"mb-4",children:(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("input",{type:"text",placeholder:"Search events, notes, focus areas...",value:g,onChange:e=>f(e.target.value),className:"w-full px-4 py-3 pl-10 bg-white/90 backdrop-blur-lg rounded-xl border border-white/30 shadow-lg text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-slate-500"}),(0,a.jsx)("svg",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]})}),(0,a.jsxs)("div",{className:"mb-4 flex gap-2 flex-wrap",children:[(0,a.jsxs)("div",{className:"flex gap-2 bg-white/90 backdrop-blur-lg rounded-xl p-2 border border-white/30 shadow-lg",children:[(0,a.jsx)("button",{onClick:()=>w("all"),className:"px-3 py-1.5 rounded-lg text-sm font-medium transition-all ".concat("all"===v?"bg-slate-500 text-white":"text-gray-700 hover:bg-white/50"),children:"All"}),(0,a.jsx)("button",{onClick:()=>w("past"),className:"px-3 py-1.5 rounded-lg text-sm font-medium transition-all ".concat("past"===v?"bg-slate-500 text-white":"text-gray-700 hover:bg-white/50"),children:"Past"}),(0,a.jsx)("button",{onClick:()=>w("future"),className:"px-3 py-1.5 rounded-lg text-sm font-medium transition-all ".concat("future"===v?"bg-slate-500 text-white":"text-gray-700 hover:bg-white/50"),children:"Future"})]}),x.length>0&&(0,a.jsxs)("select",{value:p,onChange:e=>b(e.target.value),className:"px-3 py-1.5 bg-white/90 backdrop-blur-lg rounded-xl border border-white/30 shadow-lg text-gray-900 text-sm font-medium focus:outline-none focus:ring-2 focus:ring-slate-500",children:[(0,a.jsx)("option",{value:"all",children:"All Focus Areas"}),x.map(e=>(0,a.jsx)("option",{value:e.label,children:e.label},e.label))]})]}),(0,a.jsxs)("div",{className:"mb-4 text-sm text-gray-700",children:[y.length," ",1===y.length?"event":"events"," found"]}),0===y.length?(0,a.jsx)("div",{className:"bg-white/20 backdrop-blur-lg rounded-xl border border-white/20 shadow-xl p-6 text-center",children:(0,a.jsx)("p",{className:"text-gray-700",children:g.trim()||"all"!==p||"all"!==v?"No events match your search criteria.":"No events found. Add events from the calendar."})}):(0,a.jsx)("div",{className:"space-y-3",children:y.map(t=>{let r=new Date(t.start),l=new Date(t.end),s=new Date(r);s.setHours(0,0,0,0);let n=s.getTime()===j.getTime(),i=function(e,t){if(!e)return"#E9E5F9";let r=t.find(t=>o(t.label)===o(e));return(null==r?void 0:r.color)||"#E9E5F9"}(t.area,x);return(0,a.jsx)("div",{onClick:()=>{let r=new Date(t.start),a="".concat(r.getFullYear(),"-").concat(String(r.getMonth()+1).padStart(2,"0"),"-").concat(String(r.getDate()).padStart(2,"0"));e.push("/calendar?edit=".concat(t.id,"&date=").concat(a,"&view=Day"))},className:"bg-white/90 backdrop-blur-lg rounded-xl border border-white/30 shadow-lg p-4 cursor-pointer hover:shadow-xl transition-all",children:(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)("div",{className:"w-1 h-full rounded-full flex-shrink-0",style:{backgroundColor:i,minHeight:"40px"}}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("h3",{className:"font-semibold text-gray-900 mb-1",children:t.title||t.area||"Untitled Event"}),(0,a.jsx)("div",{className:"text-sm text-gray-600 mb-2",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),(0,a.jsxs)("span",{children:[r.toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric",year:"numeric"})," â€¢ ",c(r)," - ",c(l)]})]})}),t.area&&(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)("div",{className:"w-3 h-3 rounded-full flex-shrink-0",style:{backgroundColor:i}}),(0,a.jsx)("span",{className:"text-xs text-gray-600",children:t.area})]}),t.notes&&(0,a.jsx)("p",{className:"text-sm text-gray-600 line-clamp-2",children:t.notes}),(0,a.jsx)("div",{className:"mt-2",children:n?(0,a.jsx)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-slate-100 text-slate-800",children:"Today"}):s<j?(0,a.jsx)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:"Past"}):(0,a.jsx)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"Upcoming"})})]})]})},t.id||"".concat(t.title,"-").concat(t.start))})})]}):(0,a.jsx)("div",{className:"text-center text-gray-600 py-8",children:"Loading..."})}),(0,a.jsx)("div",{className:"fixed bottom-0 left-0 right-0 p-3 pb-7 z-[9999]",children:(0,a.jsxs)("div",{className:"max-w-md mx-auto grid grid-cols-3 gap-3",children:[(0,a.jsx)("button",{onClick:()=>e.push("/"),className:"h-12 w-full rounded-2xl bg-white/40 backdrop-blur-xl text-gray-700 font-medium border-2 border-white/50 hover:bg-white/50 transition-all duration-200 shadow-2xl",children:"Dashboard"}),(0,a.jsx)("button",{onClick:()=>e.push("/calendar"),className:"h-12 w-full rounded-2xl bg-white/40 backdrop-blur-xl text-gray-700 font-medium border-2 border-white/50 hover:bg-white/50 transition-all duration-200 shadow-2xl",children:"Calendar"}),(0,a.jsx)("button",{className:"h-12 w-full rounded-2xl bg-white/40 backdrop-blur-xl text-gray-700 font-semibold border-2 border-white/50 shadow-2xl",disabled:!0,"aria-current":"page",children:"Search"})]})})]})}}},function(e){e.O(0,[971,117,744],function(){return e(e.s=8482)}),_N_E=e.O()}]);